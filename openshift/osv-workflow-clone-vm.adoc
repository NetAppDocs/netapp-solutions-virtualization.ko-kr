---
sidebar: sidebar 
permalink: openshift/osv-workflow-clone-vm.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OpenShift Virtualization, CNV, Container Native Virtualization, Red Hat OpenShift Virtualization 
summary: NetApp ONTAP 통한 Red Hat OpenShift 가상화 
---
= Red Hat OpenShift Virtualization을 사용하여 VM 복제
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Trident 사용하여 OpenShift Virtualization에서 VM을 복제합니다.  이 절차에는 Trident CSI 볼륨 복제를 활용하는 것이 포함되어 있어 소스 VM을 종료하거나 계속 실행하여 새 VM을 만들 수 있습니다.



== VM 복제

OpenShift에서 기존 VM을 복제하는 작업은 Trident의 Volume CSI 복제 기능을 통해 수행됩니다.  CSI 볼륨 클로닝을 사용하면 기존 PVC를 데이터 소스로 사용하여 PV를 복제하여 새로운 PVC를 생성할 수 있습니다.  새로운 PVC가 생성된 후에는 별도의 엔터티로 작동하며 소스 PVC에 대한 링크나 종속성이 없습니다.

image:redhat-openshift-057.png["VM 복제 아키텍처"]

CSI 볼륨 클로닝에는 고려해야 할 몇 가지 제한 사항이 있습니다.

. 소스 PVC와 대상 PVC는 동일한 프로젝트에 있어야 합니다.
. 동일한 스토리지 클래스 내에서 복제가 지원됩니다.
. 소스 볼륨과 대상 볼륨이 동일한 VolumeMode 설정을 사용하는 경우에만 복제를 수행할 수 있습니다. 예를 들어, 블록 볼륨은 다른 블록 볼륨에만 복제할 수 있습니다.


OpenShift 클러스터의 VM은 두 가지 방법으로 복제할 수 있습니다.

. 소스 VM을 종료하여
. 소스 VM을 활성 상태로 유지하여




=== 소스 VM을 종료하여

VM을 종료하여 기존 VM을 복제하는 것은 Trident 의 지원을 받아 구현된 기본 OpenShift 기능입니다.  VM을 복제하려면 다음 단계를 완료하세요.

. 워크로드 > 가상화 > 가상 머신으로 이동한 다음 복제하려는 가상 머신 옆에 있는 줄임표를 클릭합니다.
. 가상 머신 복제를 클릭하고 새 VM에 대한 세부 정보를 제공합니다.
+
image:redhat-openshift-058.png["복제 VM"]

. 가상 머신 복제를 클릭합니다. 그러면 소스 VM이 종료되고 복제 VM 생성이 시작됩니다.
. 이 단계가 완료되면 복제된 VM의 콘텐츠에 액세스하여 확인할 수 있습니다.




=== 소스 VM을 활성 상태로 유지하여

소스 VM의 기존 PVC를 복제한 다음 복제된 PVC를 사용하여 새 VM을 만드는 방식으로 기존 VM을 복제할 수도 있습니다.  이 방법을 사용하면 소스 VM을 종료할 필요가 없습니다.  VM을 종료하지 않고 복제하려면 다음 단계를 완료하세요.

. 저장소 > 영구 볼륨 클레임으로 이동한 다음 소스 VM에 연결된 PVC 옆에 있는 줄임표를 클릭합니다.
. PVC 복제를 클릭하고 새 PVC에 대한 세부 정보를 제공합니다.
+
image:redhat-openshift-059.png["클론 PVC"]

. 그런 다음 복제를 클릭합니다.  이렇게 하면 새 VM에 대한 PVC가 생성됩니다.
. 워크로드 > 가상화 > 가상 머신으로 이동한 후 만들기 > YAML 사용을 클릭합니다.
. 사양 > 템플릿 > 사양 > 볼륨 섹션에서 컨테이너 디스크 대신 복제된 PVC를 첨부합니다.  귀하의 요구 사항에 따라 새 VM에 대한 다른 모든 세부 정보를 제공합니다.
+
[source, cli]
----
- name: rootdisk
  persistentVolumeClaim:
    claimName: rhel8-short-frog-rootdisk-28dvb-clone
----
. 새로운 VM을 만들려면 만들기를 클릭하세요.
. VM이 성공적으로 생성된 후 새 VM에 액세스하여 소스 VM의 복제본인지 확인합니다.

