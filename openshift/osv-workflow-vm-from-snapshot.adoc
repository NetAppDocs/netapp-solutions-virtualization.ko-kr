---
sidebar: sidebar 
permalink: openshift/osv-workflow-vm-from-snapshot.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OpenShift Virtualization, CNV, Container Native Virtualization, Red Hat OpenShift Virtualization 
summary: NetApp ONTAP 통한 Red Hat OpenShift 가상화 
---
= Red Hat OpenShift Virtualization을 사용하여 스냅샷 복사본에서 VM 만들기
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
OpenShift Virtualization을 사용하여 스냅샷에서 VM을 만듭니다.  이 절차에는 VolumeSnapshotClass를 생성하고, VM의 영구 볼륨 클레임(PVC)의 스냅샷을 찍고, 스냅샷을 새 PVC로 복원하고, 복원된 PVC를 루트 디스크로 사용하는 새 VM을 배포하는 작업이 포함됩니다.



== 스냅샷에서 VM 생성

Trident 와 Red Hat OpenShift를 사용하면 사용자는 해당 볼륨에서 프로비저닝된 스토리지 클래스의 영구 볼륨에 대한 스냅샷을 만들 수 있습니다.  이 기능을 사용하면 사용자는 볼륨의 특정 시점 복사본을 만들어 새 볼륨을 만들거나 동일한 볼륨을 이전 상태로 복원할 수 있습니다.  이를 통해 롤백, 복제, 데이터 복원 등 다양한 사용 사례가 가능해지고 지원됩니다.

OpenShift에서 스냅샷 작업을 수행하려면 VolumeSnapshotClass, VolumeSnapshot 및 VolumeSnapshotContent 리소스를 정의해야 합니다.

* VolumeSnapshotContent는 클러스터의 볼륨에서 찍은 실제 스냅샷입니다.  이는 저장소를 위한 PersistentVolume과 유사한 클러스터 전체 리소스입니다.
* VolumeSnapshot은 볼륨의 스냅샷을 생성하기 위한 요청입니다.  이는 PersistentVolumeClaim과 유사합니다.
* VolumeSnapshotClass를 사용하면 관리자가 VolumeSnapshot에 대해 다양한 속성을 지정할 수 있습니다.  동일한 볼륨에서 찍은 다양한 스냅샷에 대해 서로 다른 속성을 가질 수 있습니다.


image:redhat-openshift-060.png["스냅샷 아키텍처의 VM"]

VM의 스냅샷을 만들려면 다음 단계를 완료하세요.

. VolumeSnapshot을 생성하는 데 사용할 수 있는 VolumeSnapshotClass를 생성합니다.  저장소 > VolumeSnapshotClasses로 이동한 후 VolumeSnapshotClass 만들기를 클릭합니다.
. 스냅샷 클래스의 이름을 입력하고 드라이버에 csi.trident.netapp.io를 입력한 후 생성을 클릭합니다.
+
image:redhat-openshift-061.png["스냅샷 클래스 생성"]

. 소스 VM에 연결된 PVC를 식별한 다음 해당 PVC의 스냅샷을 만듭니다.  로 이동 `Storage > VolumeSnapshots` 볼륨 스냅샷 만들기를 클릭하세요.
. 스냅샷을 만들려는 PVC를 선택하고 스냅샷 이름을 입력하거나 기본값을 사용하고 적절한 VolumeSnapshotClass를 선택합니다.  그런 다음 만들기를 클릭합니다.
+
image:redhat-openshift-062.png["스냅샷 만들기"]

. 이렇게 하면 해당 시점의 PVC 스냅샷이 생성됩니다.




== 스냅샷에서 새 VM 만들기

. 먼저 스냅샷을 새로운 PVC로 복원합니다.  저장소 > 볼륨 스냅샷으로 이동하여 복원하려는 스냅샷 옆에 있는 줄임표를 클릭하고 새 PVC로 복원을 클릭합니다.
. 새 PVC의 세부 정보를 입력하고 복원을 클릭합니다.  이렇게 하면 새로운 PVC가 생성됩니다.
+
image:redhat-openshift-063.png["새 PVC에 스냅샷 복원"]

. 다음으로, 이 PVC에서 새로운 VM을 만듭니다.  가상화 > 가상 머신으로 이동하여 만들기 > YAML 사용을 클릭합니다.
. 사양 > 템플릿 > 사양 > 볼륨 섹션에서 컨테이너 디스크 대신 스냅샷에서 생성된 새 PVC를 지정합니다.  귀하의 요구 사항에 따라 새 VM에 대한 다른 모든 세부 정보를 제공합니다.
+
[source, cli]
----
- name: rootdisk
  persistentVolumeClaim:
    claimName: rhel8-short-frog-rootdisk-28dvb-snapshot-restore
----
. 새로운 VM을 만들려면 만들기를 클릭하세요.
. VM이 성공적으로 생성된 후, 스냅샷이 생성된 시점에 PVC를 사용하여 스냅샷을 생성한 VM과 동일한 상태인지 액세스하여 확인합니다.

