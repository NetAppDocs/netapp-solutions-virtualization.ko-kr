---
sidebar: sidebar 
permalink: openshift/os-ci-samples.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OpenShift Virtualization, CNV, Container Native Virtualization, Red Hat OpenShift Virtualization, cloud Insights 
summary: Red Hat OpenShift Virtualization에서 Cloud Insights 사용하여 VM 모니터링 
---
= Data Infrastructure Insights 사용하여 Red Hat OpenShift Virtualization에서 VM 모니터링
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
NetApp Data Infrastructure Insights (이전 명칭 Cloud Insights)는 이벤트 기반 모니터링, 알림 생성, 백엔드 스토리지 매핑을 포함하여 OpenShift Virtualization의 VM에 대한 강력한 모니터링 기능을 제공합니다.  또한 클러스터 변경 사항을 추적하고 문제 해결을 지원하기 위한 변경 분석 기능도 제공합니다.



== **이벤트 기반 모니터링 및 알림 생성**

다음은 OpenShift Virtualization에서 VM이 포함된 네임스페이스를 이벤트를 기반으로 모니터링하는 샘플입니다.  이 예에서는 클러스터의 지정된 네임스페이스에 대한 **logs.kubernetes**.event를 기반으로 모니터가 생성됩니다.

image:redhat-openshift-ci-samples-001.png["Cloud Insights 샘플"]

이 쿼리는 네임스페이스의 가상 머신에 대한 모든 이벤트를 제공합니다.  (네임스페이스에는 가상 머신이 하나만 있습니다).  "실패" 또는 "FailedMount"인 이벤트를 기준으로 필터링하기 위한 고급 쿼리를 구성할 수도 있습니다. 이러한 이벤트는 일반적으로 PV를 생성하거나 PV를 Pod에 마운트하는 데 문제가 있을 때 생성되며, 이는 VM에 대한 영구 볼륨을 생성하는 동적 프로비저너에 문제가 있음을 나타냅니다.  위에 표시된 대로 알림 모니터를 생성하는 동안 수신자에게 알림을 구성할 수도 있습니다.  오류를 해결하는 데 도움이 될 수 있는 시정 조치나 추가 정보를 제공할 수도 있습니다.  위의 예에서 추가 정보는 문제를 해결하기 위해 Trident 백엔드 구성과 스토리지 클래스 정의를 살펴보는 것입니다.



== **분석 변경**

변경 분석을 사용하면 클러스터 상태에서 어떤 변경이 이루어졌는지, 누가 변경했는지 등을 파악할 수 있어 문제 해결에 도움이 됩니다.

image:redhat-openshift-ci-samples-002.png["Cloud Insights 샘플"]

위의 예에서 변경 분석은 OpenShift Virtualization VM이 포함된 네임스페이스에 대한 OpenShift 클러스터에서 구성됩니다.  대시보드는 타임라인에 따른 변경 사항을 보여줍니다.  변경 사항을 자세히 살펴보고 모든 변경 사항 차이점을 클릭하면 매니페스트의 차이점을 볼 수 있습니다.  매니페스트에서 영구 디스크의 새로운 백업이 생성되었음을 확인할 수 있습니다.

image:redhat-openshift-ci-samples-003.png["Cloud Insights 샘플"]

image:redhat-openshift-ci-samples-004.png["Cloud Insights 샘플"]



== **백엔드 스토리지 매핑**

Cloud Insights 사용하면 VM 디스크의 백엔드 스토리지와 PVC에 대한 다양한 통계를 쉽게 볼 수 있습니다.

image:redhat-openshift-ci-samples-005.png["Cloud Insights 샘플"]

백엔드 열 아래의 링크를 클릭하면 백엔드 ONTAP 스토리지에서 직접 데이터를 가져올 수 있습니다.

image:redhat-openshift-ci-samples-006.png["Cloud Insights 샘플"]

모든 포드와 스토리지 매핑을 살펴보는 또 다른 방법은 탐색 아래의 관찰 가능성 메뉴에서 모든 메트릭 쿼리를 만드는 것입니다.

image:redhat-openshift-ci-samples-007.png["Cloud Insights 샘플"]

링크를 클릭하면 ONTP 저장소에 대한 해당 세부 정보를 볼 수 있습니다.  예를 들어, storageVirtualMachine 열에서 SVM 이름을 클릭하면 ONTAP 에서 SVM에 대한 세부 정보를 가져옵니다.  내부 볼륨 이름을 클릭하면 ONTAP 에서 해당 볼륨에 대한 세부 정보가 표시됩니다.

image:redhat-openshift-ci-samples-008.png["Cloud Insights 샘플"]

image:redhat-openshift-ci-samples-009.png["Cloud Insights 샘플"]
