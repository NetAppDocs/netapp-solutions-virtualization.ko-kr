---
sidebar: sidebar 
permalink: vmware/vmw-vcf-321-data-protection.html 
keywords: disaster recovery, vmc, vmware cloud, aws, amazon web services, nfs datastore, fsxn, FSx ONTAP, FSx ONTAP, backup, restore, sql server, oracle 
summary:  
---
= VMware vSphere 및 BlueXP backup and recovery 위한 SnapCenter 플러그인을 사용하여 VMware에 대한 3-2-1 데이터 보호 구성
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
VMware vSphere 및 BlueXP backup and recovery 위한 SnapCenter 플러그인을 사용하여 VMware 환경에 대한 3-2-1 데이터 보호 전략을 구성합니다.  이 절차에는 기본 및 보조 ONTAP 클러스터에서 VM 및 데이터 저장소 백업을 설정하고, 플러그인과 BlueXP 구성하고, 안정적인 복구를 위해 클라우드 또는 오프사이트 스토리지로의 데이터 복제를 관리하는 작업이 포함됩니다.

3-2-1 백업 전략은 업계에서 인정된 데이터 보호 방법으로, 귀중한 데이터를 보호하기 위한 포괄적인 접근 방식을 제공합니다. 이러한 전략은 신뢰할 수 있으며 예상치 못한 재해가 발생하더라도 여전히 사용 가능한 데이터 사본이 유지된다는 점을 보장합니다.



== 개요

이 전략은 세 가지 기본 규칙으로 구성됩니다.

. 최소한 3개의 데이터 사본을 보관하세요. 이렇게 하면 사본 하나가 손실되거나 손상되더라도 최소한 두 개의 사본이 남아 있어 대체할 수 있습니다.
. 두 개의 백업 사본을 서로 다른 저장 매체나 장치에 저장하세요. 저장 매체를 다양화하면 장치별 또는 매체별 오류로부터 보호하는 데 도움이 됩니다. 한 장치가 손상되거나 한 유형의 미디어가 실패하더라도 다른 백업 사본은 영향을 받지 않습니다.
. 마지막으로, 최소한 하나의 백업 사본이 오프사이트에 있는지 확인하세요. 원격지 보관은 화재나 홍수와 같은 국지적 재해에 대비한 안전장치 역할을 하며, 이로 인해 현장 사본을 사용할 수 없게 될 수 있습니다.


이 솔루션 문서에서는 SnapCenter Plug-in for VMware vSphere 사용하여 온프레미스 가상 머신의 기본 및 보조 백업을 생성하고, 가상 머신을 위한 BlueXP backup and recovery 사용하여 데이터 사본을 클라우드 스토리지 또는 StorageGRID 에 백업하는 3-2-1 백업 솔루션을 다룹니다.



== 사용 사례

이 솔루션은 다음과 같은 사용 사례를 해결합니다.

* SnapCenter Plug-in for VMware vSphere 사용하여 온프레미스 가상 머신과 데이터 저장소를 백업하고 복원합니다.
* BlueXP backup and recovery 복구를 사용하여 ONTAP 클러스터에 호스팅된 온프레미스 가상 머신과 데이터 저장소를 백업하고 복원하고, 개체 스토리지에 백업합니다.




== NetApp ONTAP 데이터 스토리지

ONTAP 은 SAN이나 NAS 프로토콜을 통해 액세스하든 통합 스토리지를 제공하는 NetApp의 업계 최고 스토리지 솔루션입니다. 3-2-1 백업 전략은 온프레미스 데이터가 여러 미디어 유형에서 보호되도록 보장하며 NetApp 고속 플래시부터 저렴한 미디어까지 다양한 플랫폼을 제공합니다.

image:bxp-scv-hybrid-040.png["ONTAP 데이터 저장소"]

NetApp의 모든 하드웨어 플랫폼에 대한 자세한 내용은 다음을 확인하세요. https://www.netapp.com/data-storage/["NetApp 데이터 스토리지"] .



== SnapCenter Plug-in for VMware vSphere

VMware vSphere용 SnapCenter 플러그인은 VMware vSphere와 긴밀하게 통합된 데이터 보호 제품으로, 가상 머신의 백업과 복원을 쉽게 관리할 수 있도록 해줍니다. 해당 솔루션의 일부로 SnapMirror 보조 ONTAP 스토리지 클러스터에 가상 머신 데이터의 두 번째 변경 불가능한 백업 사본을 생성하는 빠르고 안정적인 방법을 제공합니다. 이 아키텍처를 구현하면 가상 머신 복원 작업을 기본 또는 보조 백업 위치에서 쉽게 시작할 수 있습니다.

SCV는 OVA 파일을 사용하여 Linux 가상 어플라이언스로 배포됩니다. 이 플러그인은 이제 원격 플러그인 아키텍처를 사용합니다. 원격 플러그인은 vCenter 서버 외부에서 실행되며 SCV 가상 어플라이언스에서 호스팅됩니다.

SCV에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/["SnapCenter Plug-in for VMware vSphere 설명서"] .



== 가상 머신을 위한 BlueXP backup and recovery

BlueXP backup and recovery 온프레미스와 클라우드 환경 모두에서 광범위한 백업 및 복구 작업에 대한 단일 제어 평면을 제공하는 클라우드 기반 데이터 관리 도구입니다. NetApp BlueXP backup and recovery 제품군의 일부인 기능은 VMware vSphere(온프레미스)용 SnapCenter 플러그인과 통합되어 데이터 사본을 클라우드의 개체 스토리지로 확장하는 기능입니다. 이를 통해 1차 또는 2차 저장소 백업에서 가져온 데이터의 세 번째 사본이 오프사이트에 생성됩니다. BlueXP backup and recovery 사용하면 이 두 온프레미스 위치 중 하나에서 데이터 사본을 전송하는 저장 정책을 쉽게 설정할 수 있습니다.

BlueXP 백업 및 복구에서 소스로 기본 백업과 보조 백업을 선택하면 다음 두 가지 토폴로지 중 하나가 구현됩니다.

*팬아웃 토폴로지* – SnapCenter Plug-in for VMware vSphere 을 통해 백업이 시작되면 로컬 스냅샷이 즉시 생성됩니다. 그런 다음 SCV는 가장 최근의 스냅샷을 Secondary ONTAP 클러스터에 복제하는 SnapMirror 작업을 시작합니다. BlueXP Backup and Recovery에서 정책은 클라우드 공급업체에서 선택한 개체 스토리지로 전송할 데이터의 스냅샷 복사본에 대한 소스로 기본 ONTAP 클러스터를 지정합니다.

image:bxp-scv-hybrid-001.png["팬아웃 토폴로지, 800, 418"]

*계단식 토폴로지* – SCV를 사용하여 기본 및 보조 데이터 복사본을 만드는 것은 위에서 언급한 팬아웃 토폴로지와 동일합니다. 하지만 이번에는 백업이 보조 ONTAP 클러스터에서 시작되도록 지정하는 정책이 BlueXP Backup and Recovery에 생성됩니다.

image:bxp-scv-hybrid-002.png["계단식 토폴로지"]

BlueXP backup and recovery 사용하면 온프레미스 ONTAP 스냅샷의 백업 사본을 AWS Glacier, Azure Blob 및 GCP Archive 스토리지에 생성할 수 있습니다.

image:bxp-scv-hybrid-003.png["계단식 토폴로지"]

또한 NetApp StorageGRID 개체 스토리지 백업 대상으로 사용할 수 있습니다. StorageGRID 에 대한 자세한 내용은 다음을 참조하세요. https://www.netapp.com/data-storage/storagegrid["StorageGRID 랜딩 페이지"] .

.솔루션 배포 개요
[%collapsible%open]
====
이 목록은 SCV와 BlueXP backup and recovery 에서 이 솔루션을 구성하고 백업 및 복원 작업을 실행하는 데 필요한 상위 수준의 단계를 제공합니다.

. 기본 및 보조 데이터 복사에 사용할 ONTAP 클러스터 간의 SnapMirror 관계를 구성합니다.
. VMware vSphere에 대한 SnapCenter 플러그인을 구성합니다.
+
.. 스토리지 시스템 추가
.. 백업 정책 생성
.. 리소스 그룹 생성
.. 백업을 먼저 실행하여 백업 작업을 시작합니다.


. 가상 머신에 대한 BlueXP backup and recovery 구성
+
.. 작업 환경 추가
.. SCV 및 vCenter 어플라이언스 알아보기
.. 백업 정책 생성
.. 백업 활성화


. SCV를 사용하여 기본 및 보조 저장소에서 가상 머신을 복원합니다.
. BlueXP 백업 및 복원을 사용하여 개체 스토리지에서 가상 머신을 복원합니다.


====
.필수 조건
[%collapsible%open]
====
이 솔루션의 목적은 VMware vSphere, VCF VI 워크로드 도메인 또는 VCF 관리 도메인에서 실행되는 가상 머신의 데이터 보호를 시연하는 것입니다.  이 솔루션의 가상 머신은 NetApp ONTAP 에서 제공하는 NFS 데이터 저장소에 호스팅됩니다. 이 솔루션은 다음 구성 요소가 구성되어 사용할 준비가 되었다고 가정합니다.

. VMware vSphere에 연결된 NFS 또는 VMFS 데이터 저장소가 있는 ONTAP 스토리지 클러스터입니다. NFS와 VMFS 데이터 저장소가 모두 지원됩니다. 이 솔루션에는 NFS 데이터 저장소가 활용되었습니다.
. NFS 데이터 저장소에 사용되는 볼륨에 대해 SnapMirror 관계가 설정된 보조 ONTAP 스토리지 클러스터입니다.
. 클라우드 공급자를 위해 BlueXP 커넥터가 설치되었으며, 객체 스토리지 백업에 사용됩니다.
. 백업할 가상 머신은 기본 ONTAP 스토리지 클러스터에 있는 NFS 데이터 저장소에 있습니다.
. BlueXP 커넥터와 온프레미스 ONTAP 스토리지 클러스터 관리 인터페이스 간의 네트워크 연결.
. BlueXP 커넥터와 온프레미스 SCV 어플라이언스 VM 간, 그리고 BlueXP 커넥터와 vCenter 간의 네트워크 연결.
. 온프레미스 ONTAP 클러스터 간 LIF와 개체 스토리지 서비스 간의 네트워크 연결입니다.
. 기본 및 보조 ONTAP 스토리지 클러스터에서 관리 SVM에 대한 DNS가 구성되었습니다. 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/ontap/networking/configure_dns_for_host-name_resolution.html#configure-an-svm-and-data-lifs-for-host-name-resolution-using-an-external-dns-server["호스트 이름 확인을 위한 DNS 구성"] .


====


== 고수준 아키텍처

이 솔루션의 테스트/검증은 최종 배포 환경과 일치할 수도 있고 일치하지 않을 수도 있는 실험실에서 수행되었습니다.

image:bxp-scv-hybrid-004.png["솔루션 아키텍처 다이어그램"]



== 솔루션 배포

이 솔루션에서는 SnapCenter Plug-in for VMware vSphere 과 BlueXP backup and recovery 활용하여 온프레미스 데이터 센터에 있는 VMware vSphere 클러스터 내에서 Windows 및 Linux 가상 머신의 백업 및 복구를 수행하는 솔루션을 배포하고 검증하기 위한 자세한 지침을 제공합니다. 이 설정에서 가상 머신은 ONTAP A300 스토리지 클러스터에서 호스팅되는 NFS 데이터 저장소에 저장됩니다. 또한 별도의 ONTAP A300 스토리지 클러스터는 SnapMirror 사용하여 복제된 볼륨의 보조 대상 역할을 합니다. 또한 Amazon Web Services와 Azure Blob에 호스팅된 개체 스토리지가 세 번째 데이터 사본의 대상으로 사용되었습니다.

SCV가 관리하는 백업의 보조 사본에 대한 SnapMirror 관계를 생성하는 방법과 SCV와 BlueXP backup and recovery 에서 백업 작업을 구성하는 방법을 살펴보겠습니다.

SnapCenter Plug-in for VMware vSphere 에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/["SnapCenter Plug-in for VMware vSphere 설명서"] .

BlueXP backup and recovery 에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/bluexp-backup-recovery/index.html["BlueXP backup and recovery 문서"] .



=== ONTAP 클러스터 간 SnapMirror 관계 설정

SnapCenter Plug-in for VMware vSphere ONTAP SnapMirror 기술을 사용하여 보조 SnapMirror 및/또는 SnapVault 복사본을 보조 ONTAP 클러스터로 전송하는 것을 관리합니다.

SCV 백업 정책에는 SnapMirror 또는 SnapVault 관계를 사용하는 옵션이 있습니다. 가장 큰 차이점은 SnapMirror 옵션을 사용할 경우 정책에서 백업을 위해 구성된 보존 일정이 기본 및 보조 위치에서 동일하다는 것입니다. SnapVault 보관을 위해 설계되었으며, 이 옵션을 사용하면 보조 ONTAP 스토리지 클러스터의 스냅샷 복사본에 대해 SnapMirror 관계와 별도의 보존 일정을 설정할 수 있습니다.

SnapMirror 관계 설정은 많은 단계가 자동화된 BlueXP 에서 수행할 수 있으며, System Manager와 ONTAP CLI를 사용하여 수행할 수도 있습니다. 이러한 모든 방법에 대해서는 아래에서 논의합니다.



=== BlueXP 와 SnapMirror 관계 구축

다음 단계는 BlueXP 웹 콘솔에서 완료해야 합니다.

.1차 및 2차 ONTAP 스토리지 시스템에 대한 복제 설정
[%collapsible%open]
====
먼저 BlueXP 웹 콘솔에 로그인하고 Canvas로 이동합니다.

. 소스(기본) ONTAP 스토리지 시스템을 대상(보조) ONTAP 스토리지 시스템으로 끌어서 놓습니다.
+
image:bxp-scv-hybrid-041.png["드래그 앤 드롭 스토리지 시스템"]

. 나타나는 메뉴에서 *복제*를 선택합니다.
+
image:bxp-scv-hybrid-042.png["복제 선택"]

. *대상 피어링 설정* 페이지에서 스토리지 시스템 간 연결에 사용할 대상 Intercluster LIF를 선택합니다.
+
image:bxp-scv-hybrid-043.png["Intercluster LIF를 선택하세요"]

. *대상 볼륨 이름* 페이지에서 먼저 소스 볼륨을 선택한 다음 대상 볼륨 이름을 입력하고 대상 SVM과 집계를 선택합니다. 계속하려면 *다음*을 클릭하세요.
+
image:bxp-scv-hybrid-044.png["소스 볼륨 선택"]

+
image:bxp-scv-hybrid-045.png["목적지 볼륨 세부 정보"]

. 복제가 발생할 최대 전송 속도를 선택합니다.
+
image:bxp-scv-hybrid-046.png["최대 전송 속도"]

. 보조 백업의 보존 일정을 결정할 정책을 선택하세요. 이 정책은 사전에 만들 수 있습니다(아래의 *스냅샷 보존 정책 만들기* 단계의 수동 프로세스 참조) 또는 원하는 경우 사후에 변경할 수 있습니다.
+
image:bxp-scv-hybrid-047.png["보존 정책을 선택하세요"]

. 마지막으로 모든 정보를 검토하고 *시작* 버튼을 클릭하여 복제 설정 프로세스를 시작합니다.
+
image:bxp-scv-hybrid-048.png["리뷰하고 가세요"]



====


=== System Manager 및 ONTAP CLI를 사용하여 SnapMirror 관계 설정

SnapMirror 관계를 설정하는 데 필요한 모든 단계는 System Manager나 ONTAP CLI를 사용하여 수행할 수 있습니다. 다음 섹션에서는 두 가지 방법에 대한 자세한 정보를 제공합니다.

.소스 및 대상 Intercluster 논리 인터페이스를 기록합니다.
[%collapsible%open]
====
소스 및 대상 ONTAP 클러스터의 경우 System Manager나 CLI에서 클러스터 간 LIF 정보를 검색할 수 있습니다.

. ONTAP System Manager에서 네트워크 개요 페이지로 이동하여 FSx가 설치된 AWS VPC와 통신하도록 구성된 유형: 클러스터 간 IP 주소를 검색합니다.
+
image:dr-vmc-aws-010.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. CLI를 사용하여 Intercluster IP 주소를 검색하려면 다음 명령을 실행하세요.
+
....
ONTAP-Dest::> network interface show -role intercluster
....


====
.ONTAP 클러스터 간 클러스터 피어링 설정
[%collapsible%open]
====
ONTAP 클러스터 간에 클러스터 피어링을 설정하려면 시작 ONTAP 클러스터에서 입력한 고유한 암호문구를 다른 피어 클러스터에서 확인해야 합니다.

. 다음을 사용하여 대상 ONTAP 클러스터에서 피어링을 설정합니다. `cluster peer create` 명령. 메시지가 표시되면 나중에 소스 클러스터에서 생성 프로세스를 마무리하는 데 사용되는 고유한 암호구를 입력합니다.
+
....
ONTAP-Dest::> cluster peer create -address-family ipv4 -peer-addrs source_intercluster_1, source_intercluster_2
Enter the passphrase:
Confirm the passphrase:
....
. 소스 클러스터에서 ONTAP 시스템 관리자나 CLI를 사용하여 클러스터 피어 관계를 설정할 수 있습니다. ONTAP 시스템 관리자에서 보호 > 개요로 이동하여 피어 클러스터를 선택합니다.
+
image:dr-vmc-aws-012.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 피어 클러스터 대화 상자에서 필요한 정보를 입력합니다.
+
.. 대상 ONTAP 클러스터에서 피어 클러스터 관계를 설정하는 데 사용된 암호를 입력하세요.
.. 선택하다 `Yes` 암호화된 관계를 구축합니다.
.. 대상 ONTAP 클러스터의 클러스터 간 LIF IP 주소를 입력하세요.
.. 클러스터 피어링 시작을 클릭하여 프로세스를 마무리합니다.
+
image:dr-vmc-aws-013.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. 다음 명령을 사용하여 대상 ONTAP 클러스터에서 클러스터 피어 관계 상태를 확인합니다.
+
....
ONTAP-Dest::> cluster peer show
....


====
.SVM 피어링 관계 설정
[%collapsible%open]
====
다음 단계는 SnapMirror 관계에 포함될 볼륨을 포함하는 대상 및 소스 스토리지 가상 머신 간에 SVM 관계를 설정하는 것입니다.

. 대상 ONTAP 클러스터에서 CLI에서 다음 명령을 사용하여 SVM 피어 관계를 만듭니다.
+
....
ONTAP-Dest::> vserver peer create -vserver DestSVM -peer-vserver Backup -peer-cluster OnPremSourceSVM -applications snapmirror
....
. 소스 ONTAP 클러스터에서 ONTAP 시스템 관리자나 CLI를 사용하여 피어링 관계를 수락합니다.
. ONTAP 시스템 관리자에서 보호 > 개요로 이동하여 스토리지 VM 피어 아래에서 피어 스토리지 VM을 선택합니다.
+
image:dr-vmc-aws-015.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. Peer Storage VM 대화 상자에서 필수 필드를 작성합니다.
+
** 소스 스토리지 VM
** 대상 클러스터
** 대상 저장소 VM
+
image:dr-vmc-aws-016.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. SVM 피어링 프로세스를 완료하려면 Peer Storage VMs를 클릭하세요.


====
.스냅샷 보존 정책 생성
[%collapsible%open]
====
SnapCenter 기본 스토리지 시스템에 스냅샷 복사본으로 존재하는 백업의 보존 일정을 관리합니다. 이는 SnapCenter 에서 정책을 생성할 때 설정됩니다. SnapCenter 보조 스토리지 시스템에 보관된 백업에 대한 보존 정책을 관리하지 않습니다. 이러한 정책은 보조 FSx 클러스터에서 생성되고 소스 볼륨과 SnapMirror 관계에 있는 대상 볼륨과 연관된 SnapMirror 정책을 통해 별도로 관리됩니다.

SnapCenter 정책을 생성할 때 SnapCenter 백업이 수행될 때 생성되는 각 스냅샷의 SnapMirror 레이블에 추가되는 보조 정책 레이블을 지정하는 옵션이 있습니다.


NOTE: 보조 저장소에서 이러한 레이블은 스냅샷 보존을 강제하기 위해 대상 볼륨과 연관된 정책 규칙과 일치합니다.

다음 예제는 SQL Server 데이터베이스와 로그 볼륨의 일일 백업에 사용되는 정책의 일부로 생성된 모든 스냅샷에 존재하는 SnapMirror 레이블을 보여줍니다.

image:dr-vmc-aws-017.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

SQL Server 데이터베이스에 대한 SnapCenter 정책을 만드는 방법에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/snapcenter/protect-scsql/task_create_backup_policies_for_sql_server_databases.html["SnapCenter 문서"^] .

먼저 보존할 스냅샷 복사본의 수를 결정하는 규칙이 포함된 SnapMirror 정책을 만들어야 합니다.

. FSx 클러스터에서 SnapMirror 정책을 만듭니다.
+
....
ONTAP-Dest::> snapmirror policy create -vserver DestSVM -policy PolicyName -type mirror-vault -restart always
....
. SnapCenter 정책에 지정된 보조 정책 레이블과 일치하는 SnapMirror 레이블이 있는 정책에 규칙을 추가합니다.
+
....
ONTAP-Dest::> snapmirror policy add-rule -vserver DestSVM -policy PolicyName -snapmirror-label SnapMirrorLabelName -keep #ofSnapshotsToRetain
....
+
다음 스크립트는 정책에 추가할 수 있는 규칙의 예를 제공합니다.

+
....
ONTAP-Dest::> snapmirror policy add-rule -vserver sql_svm_dest -policy Async_SnapCenter_SQL -snapmirror-label sql-ondemand -keep 15
....
+

NOTE: 각 SnapMirror 레이블과 보관할 스냅샷 수(보관 기간)에 대한 추가 규칙을 만듭니다.



====
.대상 볼륨 생성
[%collapsible%open]
====
소스 볼륨의 스냅샷 복사본을 수신할 대상 볼륨을 ONTAP 에 생성하려면 대상 ONTAP 클러스터에서 다음 명령을 실행합니다.

....
ONTAP-Dest::> volume create -vserver DestSVM -volume DestVolName -aggregate DestAggrName -size VolSize -type DP
....
====
.소스 볼륨과 대상 볼륨 간의 SnapMirror 관계 생성
[%collapsible%open]
====
소스 볼륨과 대상 볼륨 간에 SnapMirror 관계를 생성하려면 대상 ONTAP 클러스터에서 다음 명령을 실행합니다.

....
ONTAP-Dest::> snapmirror create -source-path OnPremSourceSVM:OnPremSourceVol -destination-path DestSVM:DestVol -type XDP -policy PolicyName
....
====
.SnapMirror 관계 초기화
[%collapsible%open]
====
SnapMirror 관계를 초기화합니다. 이 프로세스는 소스 볼륨에서 생성된 새로운 스냅샷을 시작하고 대상 볼륨에 복사합니다.

볼륨을 생성하려면 대상 ONTAP 클러스터에서 다음 명령을 실행합니다.

....
ONTAP-Dest::> snapmirror initialize -destination-path DestSVM:DestVol
....
====


=== SnapCenter Plug-in for VMware vSphere 구성

SnapCenter Plug-in for VMware vSphere 설치하면 vCenter Server Appliance 관리 인터페이스에서 액세스할 수 있습니다. SCV는 ESXi 호스트에 마운트된 NFS 데이터 저장소에 대한 백업을 관리하며, 여기에는 Windows 및 Linux VM이 포함됩니다.

검토하다 https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_protect_data_overview.html["데이터 보호 워크플로"] 백업 구성 단계에 대한 자세한 내용은 SCV 설명서 섹션을 참조하세요.

가상 머신과 데이터 저장소의 백업을 구성하려면 플러그인 인터페이스에서 다음 단계를 완료해야 합니다.

.Discovery ONTAP 스토리지 시스템
[%collapsible%open]
====
기본 및 보조 백업에 사용할 ONTAP 스토리지 클러스터를 알아보세요.

. SnapCenter Plug-in for VMware vSphere 에서 왼쪽 메뉴의 *스토리지 시스템*으로 이동한 후 *추가* 버튼을 클릭합니다.
+
image:bxp-scv-hybrid-005.png["저장 시스템"]

. 기본 ONTAP 스토리지 시스템에 대한 자격 증명과 플랫폼 유형을 입력하고 *추가*를 클릭합니다.
+
image:bxp-scv-hybrid-006.png["저장 시스템 추가"]

. 보조 ONTAP 스토리지 시스템에 대해서도 이 절차를 반복합니다.


====
.SCV 백업 정책 생성
[%collapsible%open]
====
정책은 SCV가 관리하는 백업에 대한 보존 기간, 빈도 및 복제 옵션을 지정합니다.

검토하다 https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_create_backup_policies_for_vms_and_datastores.html["VM 및 데이터 저장소에 대한 백업 정책 생성"] 자세한 내용은 설명서 섹션을 참조하세요.

백업 정책을 만들려면 다음 단계를 완료하세요.

. SnapCenter Plug-in for VMware vSphere 에서 왼쪽 메뉴의 *정책*으로 이동하고 *만들기* 버튼을 클릭합니다.
+
image:bxp-scv-hybrid-007.png["정책"]

. 정책 이름, 보존 기간, 빈도 및 복제 옵션, 스냅샷 레이블을 지정합니다.
+
image:bxp-scv-hybrid-008.png["정책 생성"]

+

NOTE: SnapCenter 플러그인에서 정책을 생성할 때 SnapMirror 및 SnapVault 에 대한 옵션이 표시됩니다. SnapMirror 선택하면 정책에 지정된 보존 일정이 기본 스냅샷과 보조 스냅샷 모두에 동일하게 적용됩니다. SnapVault 선택하면 보조 스냅샷의 보존 일정은 SnapMirror 관계로 구현된 별도의 일정을 기반으로 합니다. 이 기능은 2차 백업의 보존 기간을 늘리고 싶을 때 유용합니다.

+

NOTE: 스냅샷 레이블은 보조 ONTAP 클러스터에 복제된 SnapVault 복사본에 대해 특정 보존 기간이 있는 정책을 시행하는 데 사용할 수 있다는 점에서 유용합니다. SCV를 BlueXP 백업 및 복원과 함께 사용하는 경우 스냅샷 레이블 필드는 비어 있어야 하거나 BlueXP 백업 정책에 지정된 레이블과 [밑줄]#일치#해야 합니다.

. 필요한 각 정책에 대해 이 절차를 반복합니다. 예를 들어, 일일, 주간, 월간 백업에 대해 별도의 정책을 적용합니다.


====
.리소스 그룹 생성
[%collapsible%open]
====
리소스 그룹에는 백업 작업에 포함될 데이터 저장소와 가상 머신, 관련 정책 및 백업 일정이 포함되어 있습니다.

검토하다 https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_create_resource_groups_for_vms_and_datastores.html["리소스 그룹 생성"] 자세한 내용은 설명서 섹션을 참조하세요.

리소스 그룹을 만들려면 다음 단계를 완료하세요.

. SnapCenter Plug-in for VMware vSphere 에서 왼쪽 메뉴의 *리소스 그룹*으로 이동하여 *만들기* 버튼을 클릭합니다.
+
image:bxp-scv-hybrid-009.png["리소스 그룹 생성"]

. 리소스 그룹 만들기 마법사에서 그룹의 이름과 설명을 입력하고, 알림을 받는 데 필요한 정보도 입력합니다. *다음*을 클릭하세요
. 다음 페이지에서 백업 작업에 포함할 데이터 저장소와 가상 머신을 선택한 후 *다음*을 클릭합니다.
+
image:bxp-scv-hybrid-010.png["데이터 저장소 및 가상 머신 선택"]

+

NOTE: 특정 VM이나 전체 데이터 저장소를 선택할 수 있습니다. 어떤 것을 선택하든 기본 볼륨의 스냅샷을 찍은 결과이므로 전체 볼륨(및 데이터 저장소)이 백업됩니다. 대부분의 경우 전체 데이터 저장소를 선택하는 것이 가장 쉽습니다. 하지만 복원 시 사용 가능한 VM 목록을 제한하려는 경우 백업할 VM의 하위 집합만 선택할 수 있습니다.

. 여러 데이터스토어에 있는 VMDK가 있는 VM의 데이터스토어를 확장하기 위한 옵션을 선택한 후 *다음*을 클릭합니다.
+
image:bxp-scv-hybrid-011.png["데이터 저장소 확장"]

+

NOTE: BlueXP backup and recovery 현재 여러 데이터 저장소에 걸쳐 있는 VMDK를 사용한 VM 백업을 지원하지 않습니다.

. 다음 페이지에서 리소스 그룹과 연관될 정책을 선택하고 *다음*을 클릭합니다.
+
image:bxp-scv-hybrid-012.png["리소스 그룹 정책"]

+

NOTE: BlueXP backup and recovery 사용하여 SCV 관리 스냅샷을 개체 스토리지에 백업하는 경우 각 리소스 그룹은 단일 정책에만 연결될 수 있습니다.

. 백업이 실행될 시간을 결정하는 일정을 선택하세요. *다음*을 클릭하세요.
+
image:bxp-scv-hybrid-013.png["리소스 그룹 정책"]

. 마지막으로 요약 페이지를 검토한 후 *마침*을 클릭하여 리소스 그룹 생성을 완료합니다.


====
.백업 작업 실행
[%collapsible%open]
====
마지막 단계에서는 백업 작업을 실행하고 진행 상황을 모니터링합니다. BlueXP backup and recovery 에서 리소스를 검색하려면 SCV에서 하나 이상의 백업 작업이 성공적으로 완료되어야 합니다.

. SnapCenter Plug-in for VMware vSphere 에서 왼쪽 메뉴의 *리소스 그룹*으로 이동합니다.
. 백업 작업을 시작하려면 원하는 리소스 그룹을 선택하고 *지금 실행* 버튼을 클릭하세요.
+
image:bxp-scv-hybrid-014.png["백업 작업 실행"]

. 백업 작업을 모니터링하려면 왼쪽 메뉴의 *대시보드*로 이동하세요. *최근 작업 활동*에서 작업 ID 번호를 클릭하여 작업 진행 상황을 모니터링하세요.
+
image:bxp-scv-hybrid-015.png["작업 진행 상황 모니터링"]



====


=== BlueXP backup and recovery 에서 개체 스토리지에 대한 백업 구성

BlueXP 가 데이터 인프라를 효과적으로 관리하려면 먼저 커넥터를 설치해야 합니다. 커넥터는 리소스 검색 및 데이터 작업 관리에 관련된 작업을 실행합니다.

BlueXP 커넥터에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html["커넥터에 대해 알아보기"] BlueXP 문서에서.

사용 중인 클라우드 공급자에 대한 커넥터가 설치되면 Canvas에서 개체 스토리지의 그래픽 표현을 볼 수 있습니다.

SCV 온프레미스에서 관리하는 데이터를 백업하도록 BlueXP backup and recovery 구성하려면 다음 단계를 완료하세요.

.Canvas에 작업 환경 추가
[%collapsible%open]
====
첫 번째 단계는 BlueXP 에 온프레미스 ONTAP 스토리지 시스템을 추가하는 것입니다.

. 캔버스에서 *작업 환경 추가*를 선택하여 시작하세요.
+
image:bxp-scv-hybrid-016.png["작업 환경 추가"]

. 위치 선택에서 *사내*를 선택한 다음 *검색* 버튼을 클릭합니다.
+
image:bxp-scv-hybrid-017.png["온프레미스 선택"]

. ONTAP 스토리지 시스템의 자격 증명을 입력하고 *검색* 버튼을 클릭하여 작업 환경을 추가합니다.
+
image:bxp-scv-hybrid-018.png["스토리지 시스템 자격 증명 추가"]



====
.온프레미스 SCV 어플라이언스 및 vCenter를 검색하세요
[%collapsible%open]
====
온프레미스 데이터스토어와 가상 머신 리소스를 검색하려면 SCV 데이터 브로커에 대한 정보와 vCenter 관리 어플라이언스에 대한 자격 증명을 추가합니다.

. BlueXP 왼쪽 메뉴 선택에서 *보호 > 백업 및 복구 > 가상 머신*
+
image:bxp-scv-hybrid-019.png["가상 머신 선택"]

. 가상 머신 메인 화면에서 *설정* 드롭다운 메뉴에 액세스하고 * SnapCenter Plug-in for VMware vSphere*을 선택합니다.
+
image:bxp-scv-hybrid-020.png["드롭다운 메뉴 설정"]

. *등록* 버튼을 클릭한 다음 SnapCenter 플러그인 어플라이언스의 IP 주소와 포트 번호, vCenter 관리 어플라이언스의 사용자 이름과 비밀번호를 입력합니다. *등록* 버튼을 클릭하여 검색 과정을 시작하세요.
+
image:bxp-scv-hybrid-021.png["SCV 및 vCenter 정보 입력"]

. 작업 모니터링 탭에서 작업 진행 상황을 모니터링할 수 있습니다.
+
image:bxp-scv-hybrid-022.png["작업 진행 상황 보기"]

. 검색이 완료되면 검색된 모든 SCV 어플라이언스의 데이터 저장소와 가상 머신을 볼 수 있습니다.
+
image:bxp-scv-hybrid-023.png["사용 가능한 리소스 보기"]



====
.BlueXP 백업 정책 생성
[%collapsible%open]
====
가상 머신을 위한 BlueXP backup and recovery 에서 보존 기간, 백업 소스 및 보관 정책을 지정하는 정책을 만듭니다.

정책 생성에 대한 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/bluexp-backup-recovery/task-create-policies-vms.html["데이터 저장소를 백업하기 위한 정책 생성"] .

. 가상 머신용 BlueXP backup and recovery 메인 페이지에서 *설정* 드롭다운 메뉴에 액세스하여 *정책*을 선택합니다.
+
image:bxp-scv-hybrid-024.png["가상 머신 선택"]

. *정책 만들기*를 클릭하여 *하이브리드 백업 정책 만들기* 창에 액세스합니다.
+
.. 정책에 대한 이름을 추가합니다.
.. 원하는 보존 기간을 선택하세요
.. 백업이 기본 온프레미스 ONTAP 스토리지 시스템 또는 보조 온프레미스 ONTAP 스토리지 시스템에서 제공될지 여부를 선택합니다.
.. 선택적으로, 추가 비용 절감을 위해 백업을 보관 저장소에 얼마 동안 저장할지 기간을 지정합니다.
+
image:bxp-scv-hybrid-025.png["백업 정책 생성"]

+

NOTE: 여기에 입력된 SnapMirror 레이블은 어떤 백업에 정책을 적용할지 식별하는 데 사용됩니다. 레이블 이름은 해당 온프레미스 SCV 정책의 레이블 이름과 일치해야 합니다.



. *만들기*를 클릭하여 정책 생성을 완료하세요.


====
.Amazon Web Services에 데이터 저장소 백업
[%collapsible%open]
====
마지막 단계는 개별 데이터 저장소와 가상 머신에 대한 데이터 보호를 활성화하는 것입니다. 다음 단계에서는 AWS에 대한 백업을 활성화하는 방법을 설명합니다.

자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/bluexp-backup-recovery/task-backup-vm-data-to-aws.html["Amazon Web Services에 데이터 저장소 백업"] .

. 가상 머신을 위한 BlueXP backup and recovery 메인 페이지에서 백업할 데이터 저장소의 설정 드롭다운에 액세스하여 *백업 활성화*를 선택합니다.
+
image:bxp-scv-hybrid-026.png["백업 활성화"]

. 데이터 보호 작업에 사용할 정책을 할당하고 *다음*을 클릭합니다.
+
image:bxp-scv-hybrid-027.png["정책 할당"]

. *작업 환경 추가* 페이지에는 작업 환경이 이전에 검색된 경우 체크 표시가 있는 데이터 저장소와 작업 환경이 나타나야 합니다. 작업 환경을 이전에 발견하지 못한 경우 여기에 추가할 수 있습니다. 계속하려면 *다음*을 클릭하세요.
+
image:bxp-scv-hybrid-028.png["작업 환경 추가"]

. *공급자 선택* 페이지에서 AWS를 클릭한 다음 *다음* 버튼을 클릭하여 계속합니다.
+
image:bxp-scv-hybrid-029.png["클라우드 공급자 선택"]

. AWS 액세스 키와 비밀 키, 지역, 사용할 보관 계층을 포함하여 AWS에 대한 공급자별 자격 증명 정보를 작성합니다. 또한 온프레미스 ONTAP 스토리지 시스템에 대한 ONTAP IP 공간을 선택합니다. *다음*을 클릭하세요.
+
image:bxp-scv-hybrid-030.png["클라우드 제공 자격 증명 제공"]

. 마지막으로 백업 작업 세부 정보를 검토하고 *백업 활성화* 버튼을 클릭하여 데이터 저장소의 데이터 보호를 시작합니다.
+
image:bxp-scv-hybrid-031.png["검토 및 활성화"]

+

NOTE: 이 시점에서는 데이터 전송이 즉시 시작되지 않을 수 있습니다. BlueXP backup and recovery 매시간 남아 있는 스냅샷을 스캔한 다음 이를 개체 스토리지로 전송합니다.



====


=== 데이터 손실 시 가상 머신 복원

귀하의 데이터를 안전하게 보호하는 것은 포괄적인 데이터 보호의 한 측면일 뿐입니다. 데이터 손실이나 랜섬웨어 공격이 발생한 경우 어느 위치에서나 데이터를 신속하게 복원할 수 있는 능력도 마찬가지로 중요합니다. 이러한 기능은 원활한 비즈니스 운영을 유지하고 복구 지점 목표를 달성하는 데 필수적입니다.

NetApp 높은 적응성을 갖춘 3-2-1 전략을 제공하여 기본, 보조 및 개체 스토리지 위치에서 보존 일정을 사용자 정의하여 제어할 수 있습니다. 이 전략은 특정 요구 사항에 맞게 데이터 보호 접근 방식을 조정할 수 있는 유연성을 제공합니다.

이 섹션에서는 SnapCenter Plug-in for VMware vSphere 과 가상 머신을 위한 BlueXP backup and recovery 의 데이터 복원 프로세스에 대한 개요를 제공합니다.



==== SnapCenter Plug-in for VMware vSphere 에서 가상 머신 복원

이 솔루션을 사용하면 가상 머신이 원래 위치와 대체 위치로 복원되었습니다. 이 솔루션에서는 SCV의 데이터 복구 기능의 모든 측면을 다루지는 않습니다. SCV가 제공하는 모든 것에 대한 자세한 정보는 다음을 참조하세요. https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/scpivs44_restore_vms_from_backups.html["백업에서 VM 복원"] 제품 설명서에서.

.SCV에서 가상 머신 복원
[%collapsible%open]
====
기본 또는 보조 저장소에서 가상 머신을 복원하려면 다음 단계를 완료하세요.

. vCenter 클라이언트에서 *인벤토리 > 스토리지*로 이동한 다음 복원하려는 가상 머신이 포함된 데이터 저장소를 클릭합니다.
. *구성* 탭에서 *백업*을 클릭하면 사용 가능한 백업 목록에 액세스할 수 있습니다.
+
image:bxp-scv-hybrid-032.png["백업 목록 액세스"]

. 백업을 클릭하여 VM 목록에 액세스한 다음 복원할 VM을 선택합니다. *복원*을 클릭하세요.
+
image:bxp-scv-hybrid-033.png["복원할 VM을 선택하세요"]

. 복원 마법사에서 전체 가상 머신이나 특정 VMDK를 복원하도록 선택합니다. 원래 위치나 대체 위치에 설치할지 선택하고, 복원 후 VM 이름과 대상 데이터 저장소를 제공합니다. *다음*을 클릭하세요.
+
image:bxp-scv-hybrid-034.png["복원 세부 정보 제공"]

. 기본 또는 보조 저장 위치에서 백업을 선택합니다.
+
image:bxp-scv-hybrid-035.png["1차 또는 2차 선택"]

. 마지막으로 백업 작업 요약을 검토하고 마침을 클릭하여 복원 프로세스를 시작합니다.


====


==== BlueXP backup and recovery 통해 가상 머신 복원

가상 머신을 위한 BlueXP backup and recovery 사용하면 가상 머신을 원래 위치로 복원할 수 있습니다. 복원 기능은 BlueXP 웹 콘솔을 통해 접근합니다.

자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/bluexp-backup-recovery/task-restore-vm-data.html["클라우드에서 가상 머신 데이터 복원"] .

.BlueXP backup and recovery 에서 가상 머신 복원
[%collapsible%open]
====
BlueXP backup and recovery 에서 가상 머신을 복원하려면 다음 단계를 완료하세요.

. *보호 > 백업 및 복구 > 가상 머신*으로 이동한 후 가상 머신을 클릭하면 복원 가능한 가상 머신 목록을 볼 수 있습니다.
+
image:bxp-scv-hybrid-036.png["VM 목록 액세스"]

. 복원할 VM의 설정 드롭다운 메뉴에 액세스하여 다음을 선택합니다.
+
image:bxp-scv-hybrid-037.png["설정에서 복원을 선택하세요"]

. 복원할 백업을 선택하고 *다음*을 클릭합니다.
+
image:bxp-scv-hybrid-038.png["백업 선택"]

. 백업 작업 요약을 검토하고 *복원*을 클릭하여 복원 프로세스를 시작합니다.
. *작업 모니터링* 탭에서 복원 작업의 진행 상황을 모니터링합니다.
+
image:bxp-scv-hybrid-039.png["작업 모니터링 탭에서 복원 검토"]



====


== 결론

3-2-1 백업 전략은 SnapCenter Plug-in for VMware vSphere 과 가상 머신용 BlueXP backup and recovery 와 함께 구현될 경우 데이터 보호를 위한 견고하고 안정적이며 비용 효율적인 솔루션을 제공합니다. 이 전략은 데이터 중복성과 접근성을 보장할 뿐만 아니라, 온프레미스 ONTAP 스토리지 시스템과 클라우드 기반 개체 스토리지 모두에서 모든 위치에서 데이터를 복원할 수 있는 유연성을 제공합니다.

이 문서에 제시된 사용 사례는 NetApp, VMware 및 주요 클라우드 공급업체 간의 통합을 강조하는 검증된 데이터 보호 기술에 중점을 둡니다. SnapCenter Plug-in for VMware vSphere VMware vSphere와 원활하게 통합되어 데이터 보호 작업을 효율적이고 중앙에서 관리할 수 있도록 해줍니다. 이러한 통합을 통해 가상 머신의 백업 및 복구 프로세스가 간소화되어 VMware 생태계 내에서 쉬운 일정 예약, 모니터링 및 유연한 복원 작업이 가능해집니다. 가상 머신을 위한 BlueXP backup and recovery 클라우드 기반 개체 스토리지에 가상 머신 데이터의 안전하고 공기 간격이 있는 백업을 제공하여 3대 1의 해결책을 제시합니다. 직관적인 인터페이스와 논리적인 워크플로는 중요한 데이터의 장기 보관을 위한 안전한 플랫폼을 제공합니다.



== 추가 정보

이 솔루션에 제시된 기술에 대해 자세히 알아보려면 다음 추가 정보를 참조하세요.

* https://docs.netapp.com/us-en/sc-plugin-vmware-vsphere/["SnapCenter Plug-in for VMware vSphere 설명서"]
* https://docs.netapp.com/us-en/bluexp-family/["BlueXP 문서"]

