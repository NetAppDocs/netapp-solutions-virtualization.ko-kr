---
sidebar: sidebar 
permalink: vmware/vmw-vcf-viwld-supp-nfs-vvols.html 
keywords: netapp, vmware, cloud, foundation, vcf, aff, all-flash, nfs, vvol, vvols, array, ontap tools, otv, sddc 
summary:  
---
= ONTAP tools for VMware vSphere 사용하여 VI 워크로드 도메인에 보충 스토리지로 NFS 및 vVols 추가
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
이 사용 사례에서는 ONTAP Tools for VMware를 사용하여 VMware Cloud Foundation(VCF) Virtual Infrastructure(VI) 워크로드 도메인에 대한 보조 스토리지로 NFS 및 vVols 데이터 저장소를 추가하는 절차를 설명합니다.  이 절차에서는 VMware vSphere에 ONTAP 도구를 배포하고, NFS 논리 인터페이스를 사용하여 SVM(스토리지 가상 머신)을 구성하고, NFS 및 vVols 데이터 저장소를 프로비저닝하는 방법을 요약합니다.

*NFS*는 vVols 데이터 저장소의 저장 프로토콜로 사용됩니다.



== NFS의 이점

*간단하고 사용 용이성:* NFS는 설정과 관리가 간단하므로 빠르고 쉽게 파일을 공유해야 하는 환경에 매우 적합한 선택입니다.

*확장성:* ONTAP의 아키텍처는 NFS가 효율적으로 확장되어 인프라를 크게 변경하지 않고도 증가하는 데이터 요구 사항을 지원할 수 있도록 해줍니다.

*유연성:* NFS는 광범위한 애플리케이션과 작업 부하를 지원하므로 가상화된 환경을 포함한 다양한 사용 사례에 다양하게 활용할 수 있습니다.

자세한 내용은 다음을 참조하세요. link:vmw-vvf-overview.html["vSphere 8용 NFS v3 참조 가이드"] .



== 시나리오 개요

이 시나리오에서는 다음과 같은 상위 수준 단계를 다룹니다.

* NFS 트래픽을 위한 논리 인터페이스(LIF)가 있는 스토리지 가상 머신(SVM)을 만듭니다.
* VI 워크로드 도메인에서 NFS 네트워크에 대한 분산 포트 그룹을 만듭니다.
* VI 워크로드 도메인의 ESXi 호스트에서 NFS용 vmkernel 어댑터를 생성합니다.
* VI 워크로드 도메인에 ONTAP 도구를 배포합니다.
* VI 워크로드 도메인에 새로운 NFS 데이터 저장소를 만듭니다.
* VI 워크로드 도메인에 새로운 vVols 데이터 저장소를 만듭니다.




== 필수 조건

이 시나리오에는 다음과 같은 구성 요소와 구성이 필요합니다.

* 스토리지 트래픽에 전용된 이더넷 스위치의 물리적 데이터 포트를 갖춘 ONTAP AFF 또는 FAS 스토리지 시스템입니다.
* VCF 관리 도메인 배포가 완료되었으며 vSphere 클라이언트에 액세스할 수 있습니다.
* VI 워크로드 도메인이 이전에 배포되었습니다.


NetApp 스토리지 시스템, 스위치, 네트워크 어댑터 및 호스트 시스템에 대한 내결함성을 제공하는 NFS에 대한 중복 네트워크 설계를 권장합니다.  아키텍처 요구 사항에 따라 단일 서브넷이나 여러 서브넷으로 NFS를 배포하는 것이 일반적입니다.

참조하다 https://www.vmware.com/docs/vmw-best-practices-running-nfs-vmware-vsphere["VMware vSphere를 사용하여 NFS를 실행하기 위한 모범 사례"] VMware vSphere에 대한 자세한 정보는 다음을 참조하세요.

VMware vSphere와 함께 ONTAP 사용하는 것에 대한 네트워크 지침은 다음을 참조하세요. https://docs.netapp.com/us-en/ontap-apps-dbs/vmware/vmware-vsphere-network.html#nfs["네트워크 구성 - NFS"] NetApp 엔터프라이즈 애플리케이션 설명서의 섹션입니다.

이 문서에서는 새로운 SVM을 생성하고 NFS 트래픽에 대한 여러 LIF를 생성하기 위해 IP 주소 정보를 지정하는 프로세스를 보여줍니다.  기존 SVM에 새로운 LIF를 추가하려면 다음을 참조하세요.link:https://docs.netapp.com/us-en/ontap/networking/create_a_lif.html["LIF(네트워크 인터페이스) 생성"] .

vSphere 클러스터에서 NFS를 사용하는 것에 대한 전체 정보는 다음을 참조하십시오.link:vmw-vvf-overview.html["vSphere 8용 NFS v3 참조 가이드"] .

{nbsp}image:vmware-vcf-aff-070.png["NFS 아키텍처 다이어그램"] {nbsp}



== 배포 단계

ONTAP 도구를 배포하고 이를 사용하여 VCF 관리 도메인에 vVols 및 NFS 데이터 저장소를 생성하려면 다음 단계를 완료하세요.



=== ONTAP 스토리지 시스템에 SVM 및 LIF 생성

다음 단계는 ONTAP 시스템 관리자에서 수행됩니다.

.스토리지 VM 및 LIF 생성
[%collapsible%open]
====
NFS 트래픽을 위한 여러 LIF와 함께 SVM을 생성하려면 다음 단계를 완료하세요.

. ONTAP System Manager에서 왼쪽 메뉴의 *Storage VMs*로 이동한 다음 *+ 추가*를 클릭하여 시작합니다.
+
image:vmware-vcf-asa-001.png["SVM 생성을 시작하려면 +추가를 클릭하세요."]

+
{nbsp}

. *스토리지 VM 추가* 마법사에서 SVM의 *이름*을 입력하고, *IP 공간*을 선택한 다음, *액세스 프로토콜*에서 *SMB/CIFS, NFS, S3* 탭을 클릭하고 *NFS 사용* 확인란을 선택합니다.
+
image:vmware-vcf-aff-035.png["스토리지 VM 마법사 추가 - NFS 활성화"]

+

TIP: 여기에서는 *NFS 클라이언트 액세스 허용* 버튼을 선택할 필요가 없습니다. VMware vSphere용 Ontap Tools를 사용하여 데이터 저장소 배포 프로세스를 자동화합니다.  여기에는 ESXi 호스트에 대한 클라이언트 액세스를 제공하는 것이 포함됩니다.  &#160;

. *네트워크 인터페이스* 섹션에 첫 번째 LIF에 대한 *IP 주소*, *서브넷 마스크*, *브로드캐스트 도메인 및 포트*를 입력합니다.  이후 LIF의 경우 확인란을 활성화하여 나머지 모든 LIF에서 공통 설정을 사용하거나 별도의 설정을 사용할 수 있습니다.
+
image:vmware-vcf-aff-036.png["LIF에 대한 네트워크 정보를 작성하세요"]

+
{nbsp}

. 스토리지 VM 관리 계정(멀티 테넌시 환경의 경우)을 활성화할지 여부를 선택하고 *저장*을 클릭하여 SVM을 생성합니다.
+
image:vmware-vcf-asa-004.png["SVM 계정 활성화 및 완료"]



====


==== ESXi 호스트에서 NFS에 대한 네트워킹 설정

다음 단계는 vSphere 클라이언트를 사용하여 VI 워크로드 도메인 클러스터에서 수행됩니다.  이 경우 vCenter Single Sign-On이 사용되므로 vSphere 클라이언트는 관리 및 워크로드 도메인에서 공통적입니다.

.NFS 트래픽을 위한 분산 포트 그룹 생성
[%collapsible%open]
====
네트워크에서 NFS 트래픽을 전송할 새로운 분산 포트 그룹을 만들려면 다음을 완료하세요.

. vSphere 클라이언트에서 워크로드 도메인에 대한 *인벤토리 > 네트워킹*으로 이동합니다.  기존 분산 스위치로 이동하여 *새 분산 포트 그룹...*을 만드는 작업을 선택합니다.
+
image:vmware-vcf-asa-022.png["새 포트 그룹을 생성하도록 선택하세요"]

+
{nbsp}

. *새 분산 포트 그룹* 마법사에서 새 포트 그룹의 이름을 입력하고 *다음*을 클릭하여 계속합니다.
. *설정 구성* 페이지에서 모든 설정을 작성하세요.  VLAN을 사용하는 경우 올바른 VLAN ID를 제공해야 합니다. 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-asa-023.png["VLAN ID를 작성하세요"]

+
{nbsp}

. *완료 준비* 페이지에서 변경 사항을 검토하고 *마침*을 클릭하여 새 분산 포트 그룹을 만듭니다.
. 포트 그룹이 생성되면 포트 그룹으로 이동하여 *설정 편집...* 작업을 선택합니다.
+
image:vmware-vcf-aff-037.png["DPG - 설정 편집"]

+
{nbsp}

. *분산 포트 그룹 - 설정 편집* 페이지에서 왼쪽 메뉴의 *팀 구성 및 장애 조치*로 이동합니다.  NFS 트래픽에 사용할 업링크의 티밍을 활성화하려면 *활성 업링크* 영역에 함께 있어야 합니다.  사용하지 않는 업링크를 *사용하지 않는 업링크*로 옮깁니다.
+
image:vmware-vcf-aff-038.png["DPG - 팀 업링크"]

+
{nbsp}

. 클러스터의 각 ESXi 호스트에 대해 이 프로세스를 반복합니다.


====
.각 ESXi 호스트에 VMkernel 어댑터를 만듭니다.
[%collapsible%open]
====
워크로드 도메인의 각 ESXi 호스트에서 이 프로세스를 반복합니다.

. vSphere 클라이언트에서 워크로드 도메인 인벤토리의 ESXi 호스트 중 하나로 이동합니다.  *구성* 탭에서 *VMkernel 어댑터*를 선택하고 *네트워킹 추가...*를 클릭하여 시작합니다.
+
image:vmware-vcf-asa-030.png["네트워킹 추가 마법사 시작"]

+
{nbsp}

. *연결 유형 선택* 창에서 *VMkernel 네트워크 어댑터*를 선택하고 *다음*을 클릭하여 계속합니다.
+
image:vmware-vcf-asa-008.png["VMkernel 네트워크 어댑터 선택"]

+
{nbsp}

. *대상 장치 선택* 페이지에서 이전에 생성한 NFS용 분산 포트 그룹 중 하나를 선택합니다.
+
image:vmware-vcf-aff-039.png["대상 포트 그룹을 선택하세요"]

+
{nbsp}

. *포트 속성* 페이지에서 기본값(활성화된 서비스 없음)을 유지하고 *다음*을 클릭하여 계속합니다.
. *IPv4 설정* 페이지에서 *IP 주소*, *서브넷 마스크*를 입력하고 새로운 게이트웨이 IP 주소를 입력합니다(필요한 경우에만). 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-aff-040.png["VMkernel IPv4 설정"]

+
{nbsp}

. *완료 준비* 페이지에서 선택 사항을 검토하고 *마침*을 클릭하여 VMkernel 어댑터를 만듭니다.
+
image:vmware-vcf-aff-041.png["VMkernel 선택 검토"]



====


=== ONTAP 도구를 배포하고 사용하여 스토리지 구성

다음 단계는 vSphere 클라이언트를 사용하여 VCF 관리 도메인 클러스터에서 수행되며 여기에는 OTV 배포, vVols NFS 데이터 저장소 생성, 관리 VM을 새 데이터 저장소로 마이그레이션하는 작업이 포함됩니다.

VI 워크로드 도메인의 경우 OTV는 VCF 관리 클러스터에 설치되지만 VI 워크로드 도메인과 연결된 vCenter에 등록됩니다.

여러 vCenter 환경에서 ONTAP 도구를 배포하고 사용하는 것에 대한 추가 정보는 다음을 참조하세요.link:https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere/configure/concept_requirements_for_registering_vsc_in_multiple_vcenter_servers_environment.html["여러 vCenter Server 환경에서 ONTAP 도구를 등록하기 위한 요구 사항"] .

.ONTAP tools for VMware vSphere 배포
[%collapsible%open]
====
ONTAP tools for VMware vSphere VM 어플라이언스로 배포되며 ONTAP 스토리지를 관리하기 위한 통합 vCenter UI를 제공합니다.

ONTAP tools for VMware vSphere 배포하려면 다음을 완료하세요.

. ONTAP 도구 OVA 이미지를 가져옵니다.link:https://mysupport.netapp.com/site/products/all/details/otv/downloads-tab["NetApp 지원 사이트"] 로컬 폴더로 다운로드합니다.
. VCF 관리 도메인의 vCenter 어플라이언스에 로그인합니다.
. vCenter 어플라이언스 인터페이스에서 관리 클러스터를 마우스 오른쪽 버튼으로 클릭하고 *OVF 템플릿 배포…*를 선택합니다.
+
image:vmware-vcf-aff-021.png["OVF 템플릿 배포..."]

+
{nbsp}

. *OVF 템플릿 배포* 마법사에서 *로컬 파일* 라디오 버튼을 클릭하고 이전 단계에서 다운로드한 ONTAP 도구 OVA 파일을 선택합니다.
+
image:vmware-vcf-aff-022.png["OVA 파일 선택"]

+
{nbsp}

. 마법사의 2~5단계에서는 VM의 이름과 폴더를 선택하고, 컴퓨팅 리소스를 선택하고, 세부 정보를 검토한 다음 라이선스 계약에 동의합니다.
. 구성 및 디스크 파일의 저장 위치로 VCF 관리 도메인 클러스터의 vSAN 데이터 저장소를 선택합니다.
+
image:vmware-vcf-aff-023.png["OVA 파일 선택"]

+
{nbsp}

. 네트워크 선택 페이지에서 관리 트래픽에 사용되는 네트워크를 선택합니다.
+
image:vmware-vcf-aff-024.png["네트워크 선택"]

+
{nbsp}

. 사용자 정의 템플릿 페이지에서 필요한 모든 정보를 입력하세요.
+
** OTV에 대한 관리 액세스에 사용되는 비밀번호입니다.
** NTP 서버 IP 주소.
** OTV 유지관리 계정 비밀번호.
** OTV 더비 DB 비밀번호.
** *VMware Cloud Foundation(VCF) 활성화* 상자를 선택하지 마세요.  보조 저장 장치를 배포하는 데 VCF 모드는 필요하지 않습니다.
** *VI 워크로드 도메인*에 대한 vCenter 어플라이언스의 FQDN 또는 IP 주소
** *VI 워크로드 도메인*의 vCenter 어플라이언스에 대한 자격 증명
** 필수 네트워크 속성 필드를 제공하세요.
+
계속하려면 *다음*을 클릭하세요.

+
image:vmware-vcf-aff-025.png["OTV 템플릿 사용자 정의 1"]

+
image:vmware-vcf-asa-035.png["OTV 템플릿 사용자 정의 2"]

+
{nbsp}



. 완료 준비 페이지에서 모든 정보를 검토하고 마침을 클릭하여 OTV 어플라이언스 배포를 시작합니다.


====
.ONTAP 도구에 스토리지 시스템을 추가합니다.
[%collapsible%open]
====
. vSphere 클라이언트의 기본 메뉴에서 NetApp ONTAP 도구를 선택하여 액세스합니다.
+
image:vmware-asa-006.png["NetApp ONTAP 도구"]

+
{nbsp}

. ONTAP 도구 인터페이스의 *인스턴스* 드롭다운 메뉴에서 관리할 워크로드 도메인과 연결된 OTV 인스턴스를 선택합니다.
+
image:vmware-vcf-asa-036.png["OTV 인스턴스를 선택하세요"]

+
{nbsp}

. ONTAP 도구의 왼쪽 메뉴에서 *스토리지 시스템*을 선택한 다음 *추가*를 누릅니다.
+
image:vmware-vcf-asa-037.png["저장 시스템 추가"]

+
{nbsp}

. IP 주소, 저장 시스템의 자격 증명, 포트 번호를 입력하세요.  *추가*를 클릭하여 검색 프로세스를 시작하세요.
+
image:vmware-vcf-asa-038.png["스토리지 시스템 자격 증명 제공"]



====
.ONTAP 도구에서 NFS 데이터 저장소 만들기
[%collapsible%open]
====
ONTAP 도구를 사용하여 NFS에서 실행되는 ONTAP 데이터 저장소를 배포하려면 다음 단계를 완료하세요.

. ONTAP 도구에서 *개요*를 선택하고 *시작하기* 탭에서 *프로비저닝*을 클릭하여 마법사를 시작합니다.
+
image:vmware-vcf-asa-041.png["데이터 저장소 제공"]

+
{nbsp}

. 새 데이터 저장소 마법사의 *일반* 페이지에서 vSphere 데이터 센터 또는 클러스터 대상을 선택합니다.  데이터 저장소 유형으로 *NFS*를 선택하고, 데이터 저장소의 이름을 입력하고, 프로토콜을 선택합니다.  FlexGroup 볼륨을 사용할지 여부와 프로비저닝을 위해 스토리지 기능 파일을 사용할지 여부를 선택합니다. 계속하려면 *다음*을 클릭하세요.
+
참고: *클러스터 전체에 데이터 저장소 데이터 분산*을 선택하면 기본 볼륨이 FlexGroup 볼륨으로 생성되어 스토리지 기능 프로필을 사용할 수 없습니다.  참조하다 https://docs.netapp.com/us-en/ontap/flexgroup/supported-unsupported-config-concept.html["FlexGroup 볼륨에 대해 지원되는 구성 및 지원되지 않는 구성"] FlexGroup Volumes 사용에 대한 자세한 내용은 다음을 참조하세요.

+
image:vmware-vcf-aff-042.png["일반 페이지"]

+
{nbsp}

. *스토리지 시스템* 페이지에서 스토리지 용량 프로필, 스토리지 시스템 및 SVM을 선택합니다. 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-aff-043.png["저장 시스템"]

+
{nbsp}

. *저장소 속성* 페이지에서 사용할 집계를 선택한 후 *다음*을 클릭하여 계속합니다.
+
image:vmware-vcf-aff-044.png["저장 속성"]

+
{nbsp}

. 마지막으로 *요약*을 검토하고 마침을 클릭하여 NFS 데이터 저장소 생성을 시작합니다.
+
image:vmware-vcf-aff-045.png["리뷰 요약 및 마무리"]



====
.ONTAP 도구에서 vVols 데이터 저장소 만들기
[%collapsible%open]
====
ONTAP 도구에서 vVols 데이터 저장소를 생성하려면 다음 단계를 완료하세요.

. ONTAP 도구에서 *개요*를 선택하고 *시작하기* 탭에서 *프로비저닝*을 클릭하여 마법사를 시작합니다.
+
image:vmware-vcf-asa-041.png["데이터 저장소 제공"]

. 새 데이터 저장소 마법사의 *일반* 페이지에서 vSphere 데이터 센터 또는 클러스터 대상을 선택합니다.  데이터 저장소 유형으로 * vVols*를 선택하고, 데이터 저장소의 이름을 입력하고, 프로토콜로 *NFS*를 선택합니다. 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-aff-046.png["일반 페이지"]

. *스토리지 시스템* 페이지에서 스토리지 용량 프로필, 스토리지 시스템 및 SVM을 선택합니다. 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-aff-043.png["저장 시스템"]

. *저장소 속성* 페이지에서 데이터 저장소에 대한 새 볼륨을 생성하도록 선택하고 생성할 볼륨의 저장소 속성을 입력합니다.  *추가*를 클릭하여 볼륨을 생성한 다음 *다음*을 클릭하여 계속합니다.
+
image:vmware-vcf-aff-047.png["저장 속성"]

+
image:vmware-vcf-aff-048.png["저장소 속성 - 다음"]

. 마지막으로 *요약*을 검토하고 *마침*을 클릭하여 vVol 데이터 저장소 생성 프로세스를 시작합니다.
+
image:vmware-vcf-aff-049.png["요약 페이지"]



====


== 추가 정보

ONTAP 스토리지 시스템 구성에 대한 정보는 다음을 참조하세요.link:https://docs.netapp.com/us-en/ontap["ONTAP 9 문서"] 센터.

VCF 구성에 대한 정보는 다음을 참조하세요.link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf.html["VMware Cloud Foundation 문서"] .
