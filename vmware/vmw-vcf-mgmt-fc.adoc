---
sidebar: sidebar 
permalink: vmware/vmw-vcf-mgmt-fc.html 
keywords: netapp, vmware, cloud, foundation, vcf, asa, aff, all-flash, fc, array, ontap tools, otv, sddc, sddc manager, ontap tools, ontap tools 10 
summary:  
---
= vCenter 서버 인스턴스를 VCF 관리 도메인(FC 데이터 저장소)으로 변환
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAP Fibre Channel 데이터스토어를 사용하여 vSphere 8 클러스터를 VMware Cloud Foundation 관리 도메인으로 변환합니다.  이 절차에는 FC 스토리지 프로비저닝, VMware용 ONTAP 도구 배포, VCF 가져오기 도구를 사용하여 VCF 환경 내에서 클러스터를 마이그레이션하고 관리하는 작업이 포함됩니다.



== 소개

ONTAP 에서 실행되는 기존 파이버 채널(FC) 데이터 저장소가 있는 vSphere 환경을 변환하려면 기존 인프라를 최신 프라이빗 클라우드 아키텍처로 통합해야 합니다.  이 프로세스는 FC 스토리지의 견고성을 활용하여 원활한 데이터 액세스와 관리를 보장합니다.  변환 프로세스를 통해 VCF 관리 도메인이 설정되면 관리자는 FC 데이터 저장소를 사용하는 환경을 포함하여 추가 vSphere 환경을 VCF 생태계로 효율적으로 가져올 수 있습니다.  이러한 통합은 리소스 활용도를 높일 뿐만 아니라 프라이빗 클라우드 인프라 관리를 간소화하여 기존 작업 부하를 최소화하면서 원활한 전환을 보장합니다.

이 솔루션에서는 클러스터가 VCF 관리 도메인으로 변환될 때 vSphere 8의 FC 데이터스토어가 주 스토리지가 되는 방식을 보여드리겠습니다.



== 시나리오 개요

이 시나리오에서는 다음과 같은 상위 수준 단계를 다룹니다.

* ONTAP tools for VMware vSphere 배포합니다.
* ONTAP 도구를 사용하여 FC 데이터 저장소를 프로비저닝합니다.
* VCF 가져오기 도구를 사용하여 vSphere 클러스터를 검증합니다.
* vSphere 클러스터에 SDDC Manager를 배포합니다.
* VCF 변환 중에 NSX를 생성하기 위해 JSON 파일을 구성합니다.
* VCF 가져오기 도구를 사용하여 vSphere 8 클러스터를 VCF 5.2.1로 변환합니다.




== 필수 조건

이 시나리오에는 다음과 같은 구성 요소와 구성이 필요합니다.

* FC(Fibre Channel) 트래픽을 허용하도록 구성된 스토리지 가상 머신(SVM)이 있는 NetApp ASA R2/ ASA/ AFF 스토리지 시스템입니다.
* 논리 인터페이스(LIF)는 FC 트래픽을 전송하기 위해 만들어졌으며 SVM과 연관됩니다.
* FC 트래픽을 전송하도록 지정된 스위치에 FC 구역 설정이 구성되었습니다.
* 4개의 ESXi 호스트와 클러스터에 함께 배치된 vCenter 어플라이언스를 갖춘 vSphere 8 클러스터입니다.
* 이 목적으로 설정된 VLAN 또는 네트워크 세그먼트에서 vMotion을 위해 구성된 분산 포트 그룹입니다.
* VCF 변환에 필요한 소프트웨어를 다운로드하세요.


ONTAP tools for VMware vSphere HA 또는 비 HA 구성으로 설치할 수 있습니다.  ONTAP 도구의 필수 구성 요소에 대한 전체 정보는 다음을 참조하세요. https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere-10/deploy/prerequisites.html#system-requirements["ONTAP tools for VMware vSphere 의 필수 구성 요소"] .

vSphere를 VCF 5.2로 변환하거나 가져오기 위해 지원되는 저장소 및 기타 고려 사항은 다음을 참조하세요. https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/map-for-administering-vcf-5-2/importing-existing-vsphere-environments-admin/considerations-before-converting-or-importing-existing-vsphere-environments-into-vcf-admin.html["기존 vSphere 환경을 VMware Cloud Foundation으로 변환하거나 가져오기 전 고려 사항"] .

필수 소프트웨어는 다음을 참조하세요. https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/map-for-administering-vcf-5-2/importing-existing-vsphere-environments-admin/download-software-for-converting-or-importing-existing-vsphere-environments-admin.html["기존 vSphere 환경을 변환하거나 가져오기 위한 소프트웨어 다운로드"] .

ONTAP 스토리지 시스템 구성에 대한 정보는 다음을 참조하세요.link:https://docs.netapp.com/us-en/ontap["ONTAP 9 문서"] 센터.

VCF 구성에 대한 정보는 다음을 참조하세요.link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2.html["VMware Cloud Foundation 5.2 설명서"] .



== 배포 단계

이 솔루션은 ONTAP tools for VMware vSphere 사용하여 FC 데이터스토어를 프로비저닝하고 기존 vSphere 8 클러스터를 VCF 관리 도메인으로 변환하는 프로세스를 다룹니다.

다음 단계를 완료하세요.

* ONTAP tools for VMware vSphere 배포합니다.
* ONTAP 도구를 사용하여 FC 데이터 저장소를 프로비저닝합니다.
* VCF 가져오기 도구를 vCenter 어플라이언스에 복사합니다.
* VCF 가져오기 도구를 사용하여 vCenter 어플라이언스에 대한 사전 검사를 실행합니다.
* vCenter 클러스터에 SDDC 관리자 VM을 배포합니다.
* 변환 프로세스 중에 배포할 NSX 클러스터에 대한 JSON 파일을 만듭니다.
* 필요한 소프트웨어를 SDDC 관리자에 업로드합니다.
* vSphere 클러스터를 SDDC 관리자 인벤토리로 변환합니다.


변환 프로세스 개요는 다음을 참조하세요. https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/map-for-administering-vcf-5-2/importing-existing-vsphere-environments-admin/convert-or-import-a-vsphere-environment-into-vmware-cloud-foundation-admin.html["VMware Cloud Foundation에서 vSphere 환경을 관리 도메인으로 변환하거나 vSphere 환경을 VI 워크로드 도메인으로 가져오기"] .



=== ONTAP 도구 배포 및 FC 데이터 저장소 프로비저닝

ONTAP 도구 10의 아키텍처는 ONTAP 도구 서비스, vSphere 플러그인, REST API를 포함하는 모듈식 확장 가능 프레임워크를 활용하여 VMware 환경과 원활하게 통합되도록 설계되었으며, 이를 통해 효율적인 스토리지 관리, 자동화 및 데이터 보호가 가능합니다.

ONTAP tools for VMware vSphere HA 또는 비 HA 구성으로 설치할 수 있습니다.

image:vmware-vcf-import-nfs-010.png["ONTAP 도구 아키텍처"]

.ONTAP tools for VMware vSphere 배포
[%collapsible%open]
====
이 단계에서는 ONTAP 도구 10이 비 HA 구성으로 배포됩니다.

HA 및 비 HA 구성에 대한 추가 배포 세부 정보는 다음을 참조하세요. https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere-10/deploy/ontap-tools-deployment.html["ONTAP tools for VMware vSphere 배포"] .

. ONTAP 도구 10 OVA 템플릿을 다운로드하세요. https://mysupport.netapp.com/site/["NetApp 지원 사이트"] .
. vSphere 클라이언트에서 클러스터를 마우스 오른쪽 버튼으로 클릭하고 *OVF 템플릿 배포*를 클릭합니다.
+
image:vmware-vcf-import-nfs-001.png["OVF 템플릿 배포"]

+
{nbsp}

. *OVF 템플릿 배포*에서 다음 단계를 완료하세요.
+
** OVF 템플릿을 선택하세요.
** 이름과 폴더를 선택하세요.
** 컴퓨팅 리소스를 선택하세요.
** 리뷰 세부 정보.
** 라이센스 계약에 동의합니다.


. 템플릿의 *구성* 페이지에서 HA 구성에 ONTAP 도구를 배포할지 여부를 포함한 배포 유형을 선택합니다. 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-import-nfs-002.png["구성 - 배포 유형"]

+
{nbsp}

. *저장소 선택* 페이지에서 VM을 설치할 데이터 저장소를 선택하고 *다음*을 클릭합니다.
. ONTAP 도구 VM이 통신할 네트워크를 선택합니다. 계속하려면 *다음*을 클릭하세요.
. "템플릿 사용자 지정" 창에서 필요한 모든 정보를 입력합니다.
+
** 애플리케이션 사용자 이름 및 비밀번호
** 프록시 URL을 포함한 ASUP(자동 지원)를 활성화할지 여부를 선택합니다.
** 관리자 사용자 이름과 비밀번호.
** NTP 서버.
** 유지 관리 사용자 이름과 비밀번호(콘솔에서 사용되는 유지 관리 계정).
** 배포 구성에 필요한 IP 주소를 제공합니다.
** 노드 구성에 필요한 모든 네트워킹 정보를 제공합니다.
+
image:vmware-vcf-import-nfs-003.png["템플릿 사용자 정의"]

+
{nbsp}



. 마지막으로, 계속하려면 *다음*을 클릭하고, 배포를 시작하려면 *마침*을 클릭합니다.


====
.ONTAP 도구 구성
[%collapsible%open]
====
ONTAP 도구 VM이 설치되고 전원이 켜지면 vCenter 서버와 ONTAP 스토리지 시스템을 추가하는 등 몇 가지 기본 구성이 필요합니다.  설명서를 참조하세요 https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere-10/index.html["ONTAP tools for VMware vSphere"] 자세한 내용은.

. 참조하다 https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere-10/configure/add-vcenter.html["vCenter 인스턴스 추가"] ONTAP 도구로 관리되도록 vCenter 인스턴스를 구성합니다.
. ONTAP 스토리지 시스템을 추가하려면 vSphere 클라이언트에 로그인하고 왼쪽의 주 메뉴로 이동하세요.  * NetApp ONTAP 도구*를 클릭하여 사용자 인터페이스를 시작합니다.
+
image:vmware-vcf-import-nfs-004.png["ONTAP 도구 열기"]

+
{nbsp}

. 왼쪽 메뉴에서 *스토리지 백엔드*로 이동한 후 *추가*를 클릭하여 *스토리지 백엔드 추가* 창에 액세스합니다.
. 관리할 ONTAP 스토리지 시스템에 대한 IP 주소와 자격 증명을 입력하세요.  *추가*를 클릭하여 완료하세요.
+
image:vmware-vcf-import-nfs-005.png["스토리지 백엔드 추가"]




NOTE: 여기에서는 클러스터 IP 주소를 사용하여 vSphere 클라이언트 UI에 스토리지 백엔드가 추가됩니다.  이를 통해 스토리지 시스템의 모든 SVM을 완벽하게 관리할 수 있습니다.  또는 ONTAP 도구 관리자를 사용하여 스토리지 백엔드를 추가하고 vCenter 인스턴스와 연결할 수 있습니다. `https://loadBalanceIP:8443/virtualization/ui/` .  이 방법을 사용하면 vSphere 클라이언트 UI에서 SVM 자격 증명만 추가할 수 있으므로 스토리지 액세스를 보다 세부적으로 제어할 수 있습니다.

====
.ONTAP 도구를 사용하여 FC 데이터 저장소 프로비저닝
[%collapsible%open]
====
ONTAP 도구는 vSphere 클라이언트 UI 전체의 기능을 통합합니다.  이 단계에서는 호스트 인벤토리 페이지에서 FC 데이터 저장소가 프로비저닝됩니다.

. vSphere 클라이언트에서 호스트(또는 스토리지) 인벤토리로 이동합니다.
. *작업 > NetApp ONTAP 도구 > 데이터 저장소 만들기*로 이동합니다.
+
image:vmware-vcf-convert-fc-001.png["데이터 저장소 생성"]

+
{nbsp}

. *데이터 저장소 만들기* 마법사에서 만들 데이터 저장소 유형으로 VMFS를 선택합니다.
+
image:vmware-vcf-convert-fc-002.png["데이터 저장소 유형"]

+
{nbsp}

. *이름 및 프로토콜* 페이지에서 데이터 저장소의 이름, 크기, 사용할 FC 프로토콜을 입력합니다.
+
image:vmware-vcf-convert-fc-003.png["이름과 프로토콜"]

+
{nbsp}

. *저장소* 페이지에서 ONTAP 스토리지 플랫폼과 스토리지 가상 머신(SVM)을 선택합니다.  여기에서 사용 가능한 사용자 정의 내보내기 정책을 선택할 수도 있습니다. 계속하려면 *다음*을 클릭하세요.
+
image:vmware-vcf-convert-fc-004.png["저장 페이지"]

+
{nbsp}

. *저장소 속성* 페이지에서 사용할 저장소 집계를 선택합니다. 계속하려면 *다음*을 클릭하세요.
. *요약* 페이지에서 정보를 검토하고 *마침*을 클릭하여 프로비저닝 프로세스를 시작합니다.  ONTAP 도구는 ONTAP 스토리지 시스템에 볼륨을 생성하고 이를 클러스터의 모든 ESXi 호스트에 대한 FC 데이터 저장소로 마운트합니다.
+
image:vmware-vcf-convert-fc-005.png["요약 페이지"]



====


=== vSphere 환경을 VCF 5.2로 변환

다음 섹션에서는 SDDC 관리자를 배포하고 vSphere 8 클러스터를 VCF 5.2 관리 도메인으로 변환하는 단계를 설명합니다.  필요한 경우, 추가 세부 정보는 VMware 문서를 참조하세요.

Broadcom의 VMware에서 제공하는 VCF 가져오기 도구는 vCenter 어플라이언스와 SDDC 관리자 모두에서 구성을 검증하고 vSphere 및 VCF 환경에 대한 변환 및 가져오기 서비스를 제공하는 유틸리티입니다.

자세한 내용은 다음을 참조하세요.  https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/map-for-administering-vcf-5-2/importing-existing-vsphere-environments-admin/vcf-import-tool-options-and-parameters-admin.html["VCF 가져오기 도구 옵션 및 매개변수"] .

.VCF 가져오기 도구 복사 및 추출
[%collapsible%open]
====
VCF 가져오기 도구는 vCenter 어플라이언스에서 vSphere 클러스터가 VCF 변환 또는 가져오기 프로세스에 적합한지 확인하는 데 사용됩니다.

다음 단계를 완료하세요.

. 다음 단계를 따르세요 https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/copy-the-vcf-import-tool-to-the-target-vcenter-appliance.html["VCF 가져오기 도구를 대상 vCenter Appliance에 복사합니다."] VMware Docs에서 VCF 가져오기 도구를 올바른 위치로 복사하세요.
. 다음 명령을 사용하여 번들을 추출합니다.
+
....
tar -xvf vcf-brownfield-import-<buildnumber>.tar.gz
....


====
.vCenter 어플라이언스 검증
[%collapsible%open]
====
변환하기 전에 VCF 가져오기 도구를 사용하여 vCenter 어플라이언스를 검증합니다.

. 다음 단계를 따르세요 https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/run-a-precheck-on-the-target-vcenter-before-conversion.html["변환 전 대상 vCenter에서 사전 검사 실행"] 검증을 실행하려면.
. 다음 출력은 vCenter 어플라이언스가 사전 검사를 통과했음을 보여줍니다.
+
image:vmware-vcf-import-nfs-011.png["vcf 가져오기 도구 사전 확인"]



====
.SDDC 관리자 배포
[%collapsible%open]
====
SDDC 관리자는 VCF 관리 도메인으로 변환될 vSphere 클러스터에 함께 배치되어야 합니다.

VMware Docs의 배포 지침에 따라 배포를 완료하세요.

참조하다 https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/deploy-the-sddc-manager-appliance-on-the-target-vcenter.html["대상 vCenter에 SDDC Manager Appliance 배포"] .

자세한 내용은 다음을 참조하세요.link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/4-5/administering/host-management-admin/commission-hosts-admin.html["위원회 호스트"] VCF 관리 가이드에서.

====
.NSX 배포를 위한 JSON 파일 생성
[%collapsible%open]
====
vSphere 환경을 VMware Cloud Foundation으로 가져오거나 변환하는 동안 NSX Manager를 배포하려면 NSX 배포 사양을 만듭니다.  NSX 배포에는 최소 3개의 호스트가 필요합니다.

자세한 내용은 다음을 참조하세요. https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/generate-an-nsx-deployment-specification-for-converting-or-importing-existing-vsphere-environments.html["기존 vSphere 환경을 변환하거나 가져오기 위한 NSX 배포 사양 생성"] .


NOTE: 변환 또는 가져오기 작업에서 NSX Manager 클러스터를 배포하는 경우 NSX-VLAN 네트워킹이 활용됩니다.  NSX-VLAN 네트워킹의 제한 사항에 대한 자세한 내용은 "기존 vSphere 환경을 VMware Cloud Foundation으로 변환하거나 가져오기 전 고려 사항" 섹션을 참조하세요.  NSX-VLAN 네트워킹 제한 사항에 대한 정보는 다음을 참조하세요. https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/considerations-before-converting-or-importing-existing-vsphere-environments-into-vcf.html["기존 vSphere 환경을 VMware Cloud Foundation으로 변환하거나 가져오기 전 고려 사항"] .

다음은 NSX 배포를 위한 JSON 파일의 예입니다.

....
{
  "license_key": "xxxxx-xxxxx-xxxxx-xxxxx-xxxxx",
  "form_factor": "medium",
  "admin_password": "************************",
  "install_bundle_path": "/tmp/vcfimport/bundle-133764.zip",
  "cluster_ip": "172.21.166.72",
  "cluster_fqdn": "vcf-m02-nsx01.sddc.netapp.com",
  "manager_specs": [{
    "fqdn": "vcf-m02-nsx01a.sddc.netapp.com",
    "name": "vcf-m02-nsx01a",
    "ip_address": "172.21.166.73",
    "gateway": "172.21.166.1",
    "subnet_mask": "255.255.255.0"
  },
  {
    "fqdn": "vcf-m02-nsx01b.sddc.netapp.com",
    "name": "vcf-m02-nsx01b",
    "ip_address": "172.21.166.74",
    "gateway": "172.21.166.1",
    "subnet_mask": "255.255.255.0"
  },
  {
    "fqdn": "vcf-m02-nsx01c.sddc.netapp.com",
    "name": "vcf-m02-nsx01c",
    "ip_address": "172.21.166.75",
    "gateway": "172.21.166.1",
    "subnet_mask": "255.255.255.0"
  }]
}
....
JSON 파일을 SDDC 관리자의 디렉토리에 복사합니다.

====
.SDDC 관리자에 소프트웨어 업로드
[%collapsible%open]
====
VCF 가져오기 도구와 NSX 배포 번들을 SDDC 관리자의 /home/vcf/vcfimport 디렉토리에 복사합니다.

보다 https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/seed-software-on-sddc-manager.html["SDDC 관리자 어플라이언스에 필요한 소프트웨어 업로드"] 자세한 지침은 여기를 참조하세요.

====
.vSphere 클러스터를 VCF 관리 도메인으로 변환
[%collapsible%open]
====
VCF 가져오기 도구는 변환 과정을 수행하는 데 사용됩니다.  VCF 가져오기 도구 기능의 인쇄물을 검토하려면 /home/vcf/vcf-import-package/vcf-brownfield-import-<version>/vcf-brownfield-toolset 디렉토리에서 다음 명령을 실행하세요.

....
python3 vcf_brownfield.py --help
....
다음 명령은 vSphere 클러스터를 VCF 관리 도메인으로 변환하고 NSX 클러스터를 배포하기 위해 실행됩니다.

....
python3 vcf_brownfield.py convert --vcenter '<vcenter-fqdn>' --sso-user '<sso-user>' --domain-name '<wld-domain-name>' --nsx-deployment-spec-path '<nsx-deployment-json-spec-path>'
....
전체 지침은 다음을 참조하세요. https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/import-workload-domain-into-sddc-manager-inventory.html["vSphere 환경을 SDDC 관리자 인벤토리로 변환하거나 가져오기"] .

====
.VCF에 라이선싱 추가
[%collapsible%open]
====
변환을 완료한 후에는 환경에 라이선스를 추가해야 합니다.

. SDDC 관리자 UI에 로그인합니다.
. 탐색 창에서 *관리 > 라이선싱*으로 이동합니다.
. *+ 라이선스 키*를 클릭하세요.
. 드롭다운 메뉴에서 제품을 선택하세요.
. 라이센스 키를 입력하세요.
. 라이센스에 대한 설명을 제공하세요.
. *추가*를 클릭하세요.
. 각 라이선스에 대해 이 단계를 반복합니다.


====


== ONTAP tools for VMware vSphere 에 대한 비디오 데모

.ONTAP tools for VMware vSphere 사용한 NFS 데이터 저장소
video::1e4c3701-0bc2-41fa-ac93-b2680147f351[panopto,width=360]