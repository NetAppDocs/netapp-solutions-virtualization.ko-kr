---
sidebar: sidebar 
permalink: migration/shift-toolkit-ui.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox 
summary:  
---
= Shift Toolkit 구성
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
VM 마이그레이션 또는 변환을 자동화하기 위해 Shift Toolkit을 구성합니다. 이 프로세스에는 소스 및 대상 사이트 추가, 스토리지 구성, VM을 리소스 그룹으로 그룹화, 마이그레이션 블루프린트 생성, 마이그레이션 예약이 포함됩니다.



== 런 시프트 툴킷

* 브라우저를 사용하여 다음을 입력하여 Shift 툴킷 UI에 액세스합니다."http://<IP[] 설치 중에 지정된 주소>:3001"
+

NOTE: 최상의 환경을 위해 Google Chrome이나 Internet Explorer를 사용하세요.

* 아래와 같이 기본 자격 증명을 사용하여 UI에 액세스하세요.
+
사용자 이름: admin

+
비밀번호: admin




NOTE: 관리자 자격 증명은 "비밀번호 변경" 옵션을 사용하여 변경할 수 있습니다.

image:shift-toolkit-018.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

"동의 및 계속"을 클릭하여 법적 EULA에 동의하세요.

image:shift-toolkit-019.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



== Shift Toolkit 구성

소스 및 대상 하이퍼바이저에 대한 저장소와 연결이 올바르게 구성되면 FlexClone 기능을 활용하여 가상 머신 VMDK를 적절한 형식으로 마이그레이션하거나 변환하는 작업을 자동화하기 위해 Shift 툴킷을 구성하기 시작합니다.



=== 사이트 추가

첫 번째 단계는 소스 vCenter를 검색하여 추가한 다음 대상 Hyper-V 세부 정보(하이퍼바이저와 스토리지 모두)를 Shift 툴킷에 추가하는 것입니다.  지원되는 브라우저에서 Shift 툴킷을 열고 기본 사용자 이름과 비밀번호(admin/admin)를 사용하고 "사이트 추가"를 클릭합니다.

image:shift-toolkit-020.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]


NOTE: Discover 옵션을 사용하여 사이트를 추가할 수도 있습니다.

다음 플랫폼을 추가하세요:

*원천*

* 출처 사이트 세부 정보
+
** 사이트 이름 - 사이트 이름을 입력하세요
** 하이퍼바이저 - VMware를 소스로 선택(GA 중에 사용 가능한 유일한 옵션)
** 사이트 위치 – 기본 옵션을 선택하세요
** 커넥터 - 기본 선택을 선택하세요




입력한 후 계속을 클릭하세요.

image:shift-toolkit-021.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

* 소스 vCenter
+
** 엔드포인트 - vCenter 서버의 IP 주소 또는 FQDN을 입력하세요.
** 사용자 이름 - vCenter에 액세스하는 데 사용되는 사용자 이름(UPN 형식: `username@domain.com` )
** vCenter 비밀번호 – 리소스 인벤토리를 수행하기 위해 vCenter에 액세스하는 데 사용되는 비밀번호입니다.
** vCenter SSL 지문(선택 사항)




"자체 서명된 인증서 수락"을 선택하고 계속을 클릭합니다.

image:shift-toolkit-022.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

* ONTAP 스토리지 시스템 자격 증명


image:shift-toolkit-023.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

Shift 툴킷을 추가하면 자동으로 검색이 수행되어 관련 메타데이터 정보와 함께 VM이 표시됩니다.  Shift 툴킷은 VM에서 사용하는 네트워크와 포트 그룹을 자동으로 감지하여 채웁니다.


NOTE: 소스 사이트에 수정 사항이 있는 경우 검색을 실행하여 최신 정보를 가져오세요.  사이트 이름 옆에 있는 3개의 점을 클릭하고 "사이트 검색"을 클릭하면 됩니다.


NOTE: VM 인벤토리는 24시간마다 자동으로 새로 고쳐집니다.

image:shift-toolkit-024.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

특정 vCenter에 대한 데이터를 보려면 대시보드로 이동하여 해당 사이트 이름에 대해 "VM 목록 보기"를 클릭합니다.  이 페이지에는 VM 속성과 함께 VM 인벤토리가 표시됩니다.

다음 단계는 대상 하이퍼바이저를 추가하는 것입니다.  추가하려면 "새 사이트 추가"를 클릭하고 "대상"을 선택하세요.

*목적지*

image:shift-toolkit-025.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

* 목적지 사이트 세부 정보
+
** 사이트 이름 - 사이트 이름을 입력하세요
** 하이퍼바이저 - 대상으로 Hyper-V 또는 KVM을 선택합니다.
** 사이트 위치 – 기본 옵션을 선택하세요
** 커넥터 - 기본 선택을 선택하세요




입력한 후 계속을 클릭하세요.

image:shift-toolkit-026.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

하이퍼바이저 선택에 따라 필요한 세부 정보를 입력하세요.

* 대상 Hyper-V 세부 정보
+
** Hyper-V 독립 실행형 또는 장애 조치 클러스터 관리자 IP 주소 또는 FQDN
** 사용자 이름 - 액세스할 사용자 이름(UPN 형식: `username@domain.com` 또는 도메인\관리자)
+
비밀번호 – 리소스 인벤토리를 수행하기 위해 Hyper-V 호스트 또는 FCI 인스턴스에 액세스하는 데 사용하는 비밀번호입니다.

+
"자체 서명된 인증서 수락"을 선택하고 계속을 클릭합니다.





image:shift-toolkit-027.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

완료되면 계속을 클릭하세요.


NOTE: Shift 툴킷은 현재 릴리스에서 System Center와 직접 통신하지 않습니다.


NOTE: Hyper-V FCI 및 호스트 검색은 DNS 확인에 의존합니다.  Shift 툴킷 VM에서 호스트 이름을 확인할 수 있는지 확인하세요.  해결에 실패할 경우 호스트 파일(C:\Windows\System32\drivers\etc\hosts)을 업데이트하고 검색 작업을 다시 시도하세요.

* ONTAP 스토리지 시스템*

image:shift-toolkit-028.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]


NOTE: 디스크 포맷 변환은 볼륨 수준에서 동일한 볼륨 내에서 발생하므로 소스 및 대상 저장 시스템은 동일해야 합니다.

image:shift-toolkit-029.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

다음 단계는 필요한 VM을 리소스 그룹으로 마이그레이션 그룹으로 그룹화하는 것입니다.



== 리소스 그룹화

플랫폼을 추가한 후 마이그레이션하거나 변환하려는 VM을 리소스 그룹으로 그룹화합니다.  Shift 툴킷 리소스 그룹을 사용하면 종속된 VM 세트를 부팅 순서와 부팅 지연을 포함하는 논리적 그룹으로 그룹화할 수 있습니다.


NOTE: 리소스 그룹을 만들기 전에 Qtree가 프로비저닝되었는지 확인하세요(필수 조건 섹션에 언급된 대로).

리소스 그룹을 만들려면 "새 리소스 그룹 만들기" 메뉴 항목을 클릭하세요.

. 리소스 그룹에 액세스하려면 "새 리소스 그룹 만들기"를 클릭합니다.
+
image:shift-toolkit-030.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. "새 리소스 그룹"에서 드롭다운에서 소스 사이트를 선택하고 "만들기"를 클릭합니다.
. 리소스 그룹 세부 정보를 제공하고 워크플로를 선택합니다.  워크플로는 두 가지 옵션을 제공합니다.
+
.. 클론 기반 마이그레이션 – 소스 하이퍼바이저에서 대상 하이퍼바이저로 VM의 종단 간 마이그레이션을 수행합니다.
.. 클론 기반 변환 – 디스크 형식을 선택한 하이퍼바이저 유형으로 변환합니다.
+
image:shift-toolkit-031.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. "계속"을 클릭하세요
. 검색 옵션을 사용하여 적절한 VM을 선택하세요. 기본 필터 옵션은 "데이터 저장소"입니다.
+

NOTE: 변환하기 전에 새로 생성된 ONTAP SVM의 지정된 데이터 저장소로 변환하거나 마이그레이션할 VM을 이동합니다.  이를 통해 프로덕션 NFS 데이터 저장소를 격리하고 지정된 데이터 저장소를 사용하여 가상 머신을 스테이징할 수 있습니다.

+
image:shift-toolkit-032.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: 이 컨텍스트의 데이터 저장소 드롭다운에는 NFSv3 데이터 저장소만 표시됩니다.  NFSv4 데이터 저장소는 표시되지 않습니다.

+
image:shift-toolkit-033.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. "대상 사이트", "대상 Hyper-V 항목" 및 데이터 저장소에서 Qtree로의 매핑을 선택하여 마이그레이션 세부 정보를 업데이트합니다.
+
image:shift-toolkit-034.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: ESX에서 Hyper-V로 VM을 변환할 때 대상 경로(변환된 VM이 저장된 경로)가 Qtree로 설정되어 있는지 확인하세요. 대상 경로를 적절한 Qtree로 설정하세요.

+

NOTE: 여러 개의 qtree를 생성하여 변환된 VM 디스크를 적절히 저장하는 데 사용할 수 있습니다.

. 선택한 모든 VM에 대한 부팅 순서와 부팅 지연(초)을 선택합니다.  각 가상 머신을 선택하고 우선순위를 설정하여 전원 켜기 순서를 정합니다.  모든 가상 머신의 기본값은 3입니다.
+
옵션은 다음과 같습니다.

+
1 – 전원을 켜는 첫 번째 가상 머신 3 – 기본값 5 – 전원을 켜는 마지막 가상 머신

+
image:shift-toolkit-035.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. "리소스 그룹 만들기"를 클릭합니다.
+
image:shift-toolkit-036.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: 가상 머신을 추가하거나 제거하기 위해 리소스 그룹을 수정해야 하는 경우, 리소스 그룹 이름 옆에 있는 3개의 점을 클릭하고 "리소스 그룹 편집"을 선택하세요.





=== 청사진

가상 머신을 마이그레이션하거나 변환하려면 계획이 필요합니다.  드롭다운에서 소스 및 대상 하이퍼바이저 플랫폼을 선택하고 이 청사진에 포함될 리소스 그룹을 선택하고, 애플리케이션의 전원을 켜는 방법(예: 도메인 컨트롤러, 그 다음 1계층, 2계층 등)을 그룹화합니다.  이러한 계획은 종종 마이그레이션 계획이라고도 불립니다.  청사진을 정의하려면 "청사진" 탭으로 이동하여 "새 청사진 만들기"를 클릭합니다.

청사진 만들기를 시작하려면 "새 청사진 만들기"를 클릭하세요.

. 블루프린트에 접근하여 "새로운 블루프린트 만들기"를 클릭합니다.
+
image:shift-toolkit-037.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. "새 블루프린트"에서 계획의 이름을 제공하고 소스 사이트 > 관련 vCenter, 대상 사이트 및 관련 Hyper-V 하이퍼바이저를 선택하여 필요한 호스트 매핑을 추가합니다.
. 매핑이 완료되면 클러스터와 호스트 매핑을 선택합니다.
+
image:shift-toolkit-038.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 리소스 그룹 세부 정보를 선택하고 "계속"을 클릭하세요.
+
image:shift-toolkit-039.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. 리소스 그룹에 대한 실행 순서를 설정합니다.  이 옵션을 사용하면 여러 리소스 그룹이 있는 경우 작업 순서를 선택할 수 있습니다.
. 완료되면 적절한 가상 스위치에 대한 네트워크 매핑을 선택합니다.  가상 스위치는 이미 Hyper-V 내에 프로비저닝되어 있어야 합니다.
+
image:shift-toolkit-040.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: Hyper-V 측에서는 가상 스위치 유형 "외부"가 네트워크 선택에 지원되는 유일한 옵션입니다.

+

NOTE: 테스트 마이그레이션의 경우 "네트워크 구성 안 함"이 기본 선택이며 Shift 툴킷은 IP 주소 할당을 수행하지 않습니다.  디스크가 변환되고 Hyper-V 측에서 가상 머신을 구매한 후에는 프로덕션 네트워크와 충돌을 피하기 위해 버블 네트워크 스위치를 수동으로 할당합니다.

+
image:shift-toolkit-041.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

. VM 선택에 따라 스토리지 매핑이 자동으로 선택됩니다.
+

NOTE: 가상 머신을 만들고 SMB 공유에서 전원을 켤 수 있도록 qtree가 미리 프로비저닝되고 필요한 권한이 할당되었는지 확인하세요.

. VM 세부 정보에서 각 OS 유형에 대한 서비스 계정과 유효한 사용자 자격 증명을 제공합니다.  이는 VMware 도구를 제거하고 IP 구성 세부 정보를 백업하는 데 필요한 특정 스크립트를 생성하고 실행하기 위해 가상 머신에 연결하는 데 사용됩니다.
+
.. Windows 기반 OS의 경우 로컬 관리자 권한이 있는 사용자를 사용하는 것이 좋습니다.  도메인 자격 증명도 사용할 수 있지만 변환하기 전에 VM에 사용자 프로필이 있는지 확인해야 합니다. 그렇지 않으면 네트워크에 연결되지 않은 경우 도메인 인증을 찾게 되므로 도메인 자격 증명이 작동하지 않습니다.
.. Linux 배포판 기반 게스트 VM의 경우 비밀번호 없이 sudo 명령을 실행할 수 있는 사용자를 제공해야 합니다. 즉, 사용자는 sudoers 목록에 포함되어야 하거나 /etc/sudoers.d/ 폴더에 새 구성 파일로 추가되어야 합니다.
+
image:shift-toolkit-042.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. 다시 VM 세부 정보에서 관련 IP 구성 옵션을 선택합니다.  기본적으로 "구성하지 않음"이 선택되어 있습니다.
+
.. 소스 시스템에서 동일한 IP를 가진 VM을 마이그레이션하려면 "IP 유지"를 선택합니다.
.. 소스 시스템에서 정적 IP를 사용하여 VM을 마이그레이션하고 대상 VM에 DHCP를 할당하려면 "DHCP"를 선택합니다.
+
이 기능이 작동하려면 다음 요구 사항을 충족해야 합니다.

+
*** prepareVM 단계와 예약된 마이그레이션 시간까지 VM의 전원이 켜져 있는지 확인하세요.
*** VMware VM의 경우 VMware Tools가 설치되어 있는지 확인하세요.
*** Windows OS에서는 관리자 권한이 있는 계정으로 소스 VM에서 준비 스크립트를 실행하고, Linux 기반 배포판 OS에서는 암호 옵션 없이 sudo 권한이 있는 계정으로 실행하여 Cron 작업을 생성합니다.




. 다음 단계는 VM 구성입니다.
+
.. 선택적으로 VM CPU/RAM 매개변수의 크기를 조정할 수 있는데, 이는 크기 조정에 매우 유용합니다.
.. 부팅 순서 재정의: 리소스 그룹 전체에서 선택한 모든 VM에 대한 부팅 순서 및 부팅 지연(초)도 수정합니다.  이는 리소스 그룹 부팅 순서를 선택하는 동안 선택한 내용을 변경해야 할 경우 부팅 순서를 수정하기 위한 추가 옵션입니다.  기본적으로 리소스 그룹 선택 중에 선택된 부팅 순서가 사용되지만, 이 단계에서 모든 수정 작업을 수행할 수 있습니다.
.. 전원 켜기: 워크플로가 가상 머신의 전원을 켜지 않도록 하려면 이 옵션의 선택을 취소하세요.  기본 옵션은 ON으로, VM의 전원이 켜져 있음을 의미합니다.
.. VMware 도구 제거: Shift Toolkit은 변환 후 VMware 도구를 제거합니다.  이 옵션은 기본적으로 선택되어 있습니다.  고객의 맞춤형 스크립트를 실행하려는 경우 이 옵션을 선택 취소할 수 있습니다.
.. 세대: Shift 툴킷은 다음의 경험 법칙을 사용하며 적절한 세대를 기본값으로 지정합니다. Gen1 > BIOS, Gen2 > EFI.  이 옵션은 선택할 수 없습니다.
.. MAC 유지: MAC에 의존하는 애플리케이션의 라이선싱 문제를 극복하기 위해 각 VM의 MAC 주소를 유지할 수 있습니다.
.. 서비스 계정 재정의: 이 옵션을 사용하면 글로벌 계정을 사용할 수 없는 경우 별도의 서비스 계정을 지정할 수 있습니다.
+
image:shift-toolkit-043.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



. "계속"을 클릭하세요.
. 다음 단계에서는 날짜와 시간을 설정하는 확인란을 선택하여 마이그레이션을 예약합니다.  예약된 날짜 전에 모든 가상 머신(VM)이 준비되고 전원이 꺼졌는지 확인하세요.  완료되면 "청사진 만들기"를 클릭하세요.
+
image:shift-toolkit-044.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: 일정을 예약할 때 현재 Shift VM 시간보다 최소 30분 전의 날짜를 선택하세요.  이는 워크플로가 리소스 그룹 내에서 VM을 준비할 수 있는 충분한 시간을 확보하도록 하기 위한 것입니다.

. 청사진이 생성되면 prepareVM 작업이 시작되고 소스 VM에서 스크립트가 자동으로 실행되어 마이그레이션을 준비합니다.
+
image:shift-toolkit-045.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
이 작업은 invoke-VMScript 메서드를 사용하여 VMware 도구를 제거하고 IP 주소, 경로, DNS 정보를 비롯한 네트워크 구성 세부 정보를 백업하는 데 필요한 스크립트를 복사하는 스크립트를 실행합니다. 이 정보는 대상 VM에서 동일한 설정을 유지하는 데 사용됩니다.

+
** Windows 기반 운영 체제의 경우 준비 스크립트가 저장되는 기본 위치는 "C:\ NetApp" 폴더입니다.
+
image:shift-toolkit-046.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

** Linux 기반 VM의 경우 준비 스크립트가 저장되는 기본 위치는 / NetApp 및 /opt 디렉토리입니다.
+
image:shift-toolkit-047.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+

NOTE: CentOS 또는 Red Hat을 실행하는 Linux 소스 VM의 경우 Shift 툴킷은 필요한 Hyper-V 드라이버를 자동으로 설치합니다.  VM이 변환 후 성공적으로 부팅될 수 있도록 디스크 변환 전에 소스 VM에 이러한 드라이버가 있어야 합니다.

+

NOTE: 자세한 내용은 다음을 참조하세요.link:https://access.redhat.com/solutions/3465011["RHEL VM을 Hyper-V로 마이그레이션한 후 시스템이 Dracut에 갇힘"] .

+
prepareVM 작업이 성공적으로 완료되면(아래 스크린샷 참조), VM을 마이그레이션할 준비가 되고 블루프린트 상태가 "활성"으로 업데이트됩니다.

+
image:shift-toolkit-048.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
image:shift-toolkit-049.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

+
이제 설정된 시간에 마이그레이션이 진행되거나 마이그레이션 옵션을 클릭하여 수동으로 시작할 수 있습니다.







== 모니터링 및 대시보드

작업 모니터링을 사용하여 작업 상태를 모니터링합니다.

image:shift-toolkit-076.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

직관적인 UI로 마이그레이션, 변환 및 청사진의 상태를 확실하게 평가하세요.  이를 통해 관리자는 성공, 실패 또는 부분적으로 실패한 계획과 마이그레이션 또는 변환된 VM 수를 신속하게 파악할 수 있습니다.

image:shift-toolkit-077.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



== 고급 설정

Shift 툴킷은 상단 도구 모음의 설정 아이콘을 클릭하여 접근할 수 있는 고급 설정을 제공합니다.

image:shift-toolkit-078.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



=== 크레드SSP

Shift는 자격 증명 보안 서비스 공급자(CredSSP)를 활용하여 자격 증명 전송을 관리합니다.  변환 프로세스 동안 Shift 서버는 변환되는 VM의 게스트 OS에서 여러 개의 스크립트를 실행합니다.  이러한 스크립트를 실행하기 위한 자격 증명은 Hyper-V 서버를 거쳐 Shift 서버에서 게스트 OS로 "더블 홉"을 통해 전달됩니다.

image:shift-toolkit-079.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

*Shift 서버를 CredSSP 클라이언트로 구성:*

"고급 설정" 마법사는 자동으로 Shift 서버를 CredSSP 클라이언트로 구성합니다.  이렇게 하면 Shift 서버가 Hyper-V 서버에 자격 증명을 위임할 수 있습니다.

*무대 뒤에서 무슨 일이 일어나는가:*

Shift 툴킷은 일련의 명령을 실행하여 자신을 클라이언트로 구성하고 Hyper-V 호스트를 관리할 수 있도록 합니다.  이 과정에는 필요한 구성을 설정하는 것이 포함됩니다.

* 다음 명령을 실행합니다:
+
** Set-Item WSMan:\localhost\Client\TrustedHosts -Value "fqdn-of-hyper-v-host"
** Enable-WSManCredSSP -Role 클라이언트 -DelegateComputer "fqdn-of-hyper-v-host"


* 다음 그룹 정책을 구성합니다.
+
** 컴퓨터 구성 > 관리 템플릿 > 시스템 > 자격 증명 위임 > NTLM 전용 서버 인증을 사용하여 새 자격 증명 위임 허용




사용을 선택하고 wsman/fqdn-of-hyper-v-host를 추가합니다.

*Hyper-V 서버를 CredSSP 서버로 구성*

Hyper-V 서버에서 Enable-WSManCredSSP cmdlet을 사용하여 Hyper-V 서버를 CredSSP 서버로 구성합니다. 이렇게 하면 Hyper-V 서버가 Shift 서버로부터 자격 증명을 받을 수 있습니다.

Shift 툴킷 서버에서 가상 머신을 프로비저닝할 Hyper-V 호스트에서 관리자 권한으로 Windows PowerShell 세션을 열고 다음 명령을 실행합니다.

. Enable-PSRemoting
. Enable-WSManCredSSP -역할 서버




=== 멋진

고급 설정의 Swagger 페이지에서는 사용 가능한 API와 상호 작용할 수 있습니다.  Shift 툴킷 REST API를 통해 사용할 수 있는 리소스는 swagger API 문서 페이지에 표시된 대로 범주별로 정리되어 있습니다.  아래에는 기본 리소스 경로를 포함한 각 리소스에 대한 간략한 설명이 나와 있으며, 필요한 경우 추가 사용 고려 사항도 나와 있습니다.

image:shift-toolkit-080.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

*세션*

이 API를 사용하여 Shift 툴킷 서버에 로그인할 수 있습니다.  이 API는 후속 요청을 인증하는 데 사용되는 사용자 인증 토큰을 반환합니다.

* 세션을 시작하세요
* 세션 검증
* 모든 세션 ID 가져오기
* 세션 종료


*커넥터*

* 커넥터 추가
* 모든 커넥터의 세부 정보를 얻으세요
* ID로 커넥터 세부 정보 업데이트
* ID로 커넥터 세부 정보 가져오기


*거주자*

API를 사용하여 추가 및 가져오기 작업 수행

* 세입자 추가
* 모든 세입자를 얻으세요


*사용자*

API를 사용하여 추가, 가져오기, 변경 및 수락 작업을 수행합니다.

* 사용자 추가
* 모든 사용자 가져오기
* 사용자의 비밀번호 변경
* EULA에 동의하세요


*크레딧SSP*

API를 사용하여 활성화 및 가져오기 작업을 수행합니다.

* credssp 활성화
* credssp 상태 가져오기


*대지*

API를 사용하여 가져오기, 추가, 삭제 및 업데이트 작업 수행

* 사이트 개수를 구하세요
* 모든 사이트 세부 정보 가져오기
* 사이트 추가
* ID로 사이트 세부 정보 가져오기
* ID로 사이트 삭제
* 사이트에 가상 환경 추가
* 사이트에 저장 환경 추가
* 사이트의 가상 환경 세부 정보 가져오기
* 사이트의 가상 환경 세부 정보 업데이트
* 사이트의 가상 환경 세부 정보 삭제
* 사이트의 저장 환경 세부 정보 가져오기
* 사이트의 스토리지 환경 세부 정보 업데이트
* 사이트의 스토리지 환경 세부 정보 삭제


*발견*

API를 사용하여 검색 및 가져오기 작업을 수행합니다.

* 소스 사이트 검색
* 소스 사이트에 대한 모든 검색 요청을 받습니다.
* 타겟 사이트를 발견하세요
* 대상 사이트에 대한 모든 검색 요청을 가져옵니다.
* ID로 소스 사이트에 대한 검색 단계를 가져옵니다.
* ID로 대상 사이트에 대한 검색 단계를 가져옵니다.


*VM*

API를 사용하여 get 작업 수행

* 소스에서 사이트 및 가상 환경에 대한 VM 가져오기
* 사이트 및 가상 환경에 대한 보호되지 않은 VM 가져오기
* VM 개수 가져오기
* 보호된 VM 수 가져오기


*의지*

API를 사용하여 get 작업 수행

* 사이트 및 가상 환경에 대한 리소스 세부 정보 가져오기
* 소스 사이트 리소스 수 가져오기


*리소스 그룹*

API를 사용하여 추가, 업데이트 및 가져오기 작업을 수행합니다.

* 보호 그룹 수를 얻으세요
* 모든 보호 그룹 세부 정보를 얻으세요
* 보호 그룹 추가
* ID로 보호 그룹 세부 정보를 받으세요
* ID로 보호 그룹 삭제
* ID로 보호 그룹 세부 정보 업데이트
* ID로 보호 그룹의 VM 가져오기
* 보호 그룹이 포함된 청사진 가져오기


*청사진*

API를 사용하여 추가, 업데이트 및 가져오기 작업을 수행합니다.

* 청사진 개수 가져오기
* 모든 청사진 세부 정보 가져오기
* 청사진 추가
* ID로 청사진 세부 정보 가져오기
* ID로 청사진 삭제
* ID에 대한 청사진 세부 정보 업데이트
* 청사진의 VM을 가져옵니다
* 블루프린트에 있는 VM의 전원 상태를 가져옵니다.
* 청사진 개수 가져오기
* 모든 청사진 세부 정보를 얻으세요


*규정 준수*

API를 사용하여 추가 및 가져오기 작업 수행

* 청사진에 대한 규정 준수 검사 결과 받기
* 청사진에 대한 규정 준수 검사 최종 상태 확인
* 청사진에 대한 주문형 신규 규정 준수 검사 추가


*실행*

API를 사용하여 get 작업 수행

* 모든 실행 세부 정보를 얻으세요
* 진행 중인 실행에 대한 세부 정보를 얻으세요
* 실행 횟수 가져오기
* 진행 중인 실행 횟수 가져오기
* 실행 ID에 대한 단계 가져오기


*회복*

API를 사용하여 추가 및 가져오기 작업 수행

* 블루프린트에 대한 새로운 실행 요청 추가
* 블루프린트에 대한 실행 재시도 요청 추가
* 모든 블루프린트의 실행 상태를 가져옵니다.
* 블루프린트 ID에 대한 실행 상태 가져오기


*스크립트 블록*

API를 사용하여 가져오기 및 업데이트 작업 수행

* 모든 스크립트 메타데이터 가져오기
* ID로 스크립트 메타데이터 가져오기
* 모든 새로 고침 메타데이터 가져오기
* 스크립트 실행




=== 스크립트 블록

Shift 툴킷의 스크립트 블록은 내부 및 외부 API를 통해 기능을 자동화, 통합, 개발하는 데 도움이 되는 샘플 코드를 제공합니다.  스크립트 블록의 코드 샘플 섹션에서 Shift 툴킷 자동화 팀과 커뮤니티 멤버가 작성한 샘플을 찾아보고 다운로드하세요.  샘플을 사용하여 자동화, 관리 또는 통합 작업을 시작하세요.

image:shift-toolkit-081.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

다음은 Shift UI 내에서 특정 작업을 삭제하는 데 사용할 수 있는 샘플 PowerShell 스크립트의 예입니다.  이 기능은 워크플로를 통해서는 공개되지 않지만, 스크립트 블록을 통해서는 동일한 기능을 수행할 수 있습니다.  동일한 스크립트는 bat 스크립트로도 제공되며, 이를 다운로드하여 호출하면 쉽게 실행할 수 있습니다.

image:shift-toolkit-082.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

여기서의 목적은 Shift 툴킷 API와 해당 하이퍼바이저에서 게시한 API를 사용하여 특정 하이퍼바이저에 대한 0일차 및 N일차 작업을 수행하는 샘플 스크립트를 제공하는 것입니다.



== SAN 환경

Shift 툴킷의 핵심 요구 사항으로, 변환할 VM은 NAS 환경(ESX의 경우 NFS)에 있어야 합니다.  VM이 SAN 환경(iSCSI, FC, FCoE, NVMeFC)에 있는 경우 변환하기 전에 NAS 환경으로 마이그레이션해야 합니다.

image:shift-toolkit-083.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

위의 접근 방식은 VM이 SAN 데이터 저장소에 저장되는 일반적인 SAN 환경을 보여줍니다.  ESX에서 Hyper-V로 변환할 VM과 해당 디스크는 먼저 VMware vSphere Storage vMotion을 사용하여 NFS 데이터 저장소로 마이그레이션됩니다.  Shift 툴킷은 FlexClone 사용하여 ESX에서 Hyper-V로 VM을 변환합니다. 변환된 VM과 해당 디스크는 CIFS 공유에 저장됩니다.  변환된 VM(디스크와 함께)은 Hyper-V 스토리지 라이브 마이그레이션을 통해 SAN이 활성화된 CSV로 다시 마이그레이션됩니다.


NOTE: 노드에 서로 다른 프로세스 기능 세트가 있는 경우 라이브 VM 마이그레이션이 실패할 수 있습니다.  "다른 프로세서가 있는 실제 컴퓨터로 마이그레이션"을 설정하면 이 문제를 해결할 수 있습니다.  이 스크립트는 스크립트 블록에서 사용할 수 있습니다.
