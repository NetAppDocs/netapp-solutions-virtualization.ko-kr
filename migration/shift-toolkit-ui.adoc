---
sidebar: sidebar 
permalink: migration/shift-toolkit-ui.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox 
summary:  
---
= NetApp Shift Toolkit 구성
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
VM 마이그레이션 또는 변환을 자동화하기 위해 Shift Toolkit을 구성합니다. 이 프로세스에는 소스 및 대상 사이트 추가, 스토리지 구성, VM을 리소스 그룹으로 그룹화, 마이그레이션 블루프린트 생성, 마이그레이션 예약이 포함됩니다.



== 런 시프트 툴킷

* 브라우저를 사용하여 다음을 입력하여 Shift 툴킷 UI에 액세스하세요. `http://<IP address specified during installation>:3001`
+

NOTE: 최상의 환경을 위해 Google Chrome이나 Internet Explorer를 사용하세요.

* 아래와 같이 기본 자격 증명을 사용하여 UI에 액세스하세요. 사용자 이름: admin 비밀번호: admin
+
image::shift-toolkit-050.png[NetApp Shift Toolkit 로그인 화면 다이어그램]

+

NOTE: 관리자는 처음 로그인할 때 자격 증명을 변경해야 합니다.

+

NOTE: 필수 비밀번호 변경 후, GUI에 로그인한 후 "비밀번호 변경" 옵션을 사용하여 관리자 자격 증명도 변경할 수 있습니다.

+
image::shift-toolkit-051.png[NetApp Shift Toolkit 암호 변경 화면 다이어그램]

+
완료되면 "동의 및 계속"을 클릭하여 법적 EULA에 동의합니다.

+
image::shift-toolkit-052.png[NetApp 최종 사용자 라이선스 계약(EULA) 스크린샷]





== Shift Toolkit 구성

소스 및 대상 하이퍼바이저에 대한 저장소와 연결이 올바르게 구성되면 FlexClone 기능을 활용하여 가상 머신을 적절한 형식으로 마이그레이션하거나 변환하는 작업을 자동화하기 위해 Shift 툴킷을 구성하기 시작합니다.



=== 사이트 추가

첫 번째 단계는 소스를 검색하여 추가한 다음 대상 하이퍼바이저 세부 정보(하이퍼바이저와 스토리지 모두)를 Shift 툴킷에 추가하는 것입니다.  지원되는 브라우저에서 Shift 툴킷을 열고 기본 사용자 이름과 비밀번호를 사용하여 "사이트 추가"를 클릭합니다.

image::shift-toolkit-053.png[Shift Toolkit 사이트 추가 대화 상자의 대화 상자]


NOTE: Discover 옵션을 사용하여 사이트를 추가할 수도 있습니다.

다음 플랫폼을 추가하세요:



==== 원천

* 출처 사이트 세부 정보
+
** 사이트 이름 - 사이트 이름을 입력하세요
** 하이퍼바이저 - 소스로 VMware 또는 Hyper-V를 선택하세요.
** 사이트 위치 – 기본 옵션을 선택하세요
** 커넥터 - 기본 선택을 선택하세요




입력한 후 계속을 클릭하세요.

image::shift-toolkit-054.png[Shift Toolkit 새 사이트 추가 대화 상자의 대화 상자]

* VMware를 선택한 경우 소스 vCenter 세부 정보를 입력합니다.
+
** 엔드포인트 - vCenter 서버의 IP 주소 또는 FQDN을 입력하세요.
** 사용자 이름 - vCenter에 액세스하는 데 사용되는 사용자 이름(UPN 형식: username@domain.com)
** vCenter 비밀번호 – 리소스 인벤토리를 수행하기 위해 vCenter에 액세스하는 데 사용되는 비밀번호입니다.
** vCenter SSL 지문(선택 사항)


* Hyper-V를 선택한 경우 소스 Hyper-V 세부 정보를 입력합니다.
+
** 엔드포인트 - 독립 실행형 호스트 또는 장애 조치 클러스터 엔드포인트의 IP 주소나 FQDN을 입력합니다.
** Hyper-V 사용자 이름 - Hyper-V에 액세스하기 위한 사용자 이름(하위 로그인(도메인\사용자 이름) 또는 UPN 형식)
** Hyper-V 암호 – 리소스 인벤토리를 수행하기 위해 Hyper-V에 액세스하는 데 사용되는 암호입니다.
+
 Select “Accept Self signed certificate” and click Continue.


* ONTAP 스토리지 시스템 자격 증명


image::shift-toolkit-055.png[Shift Toolkit 새 사이트 추가 대화 상자의 대화 상자]

Shift 툴킷을 추가하면 자동으로 검색이 수행되어 관련 메타데이터 정보와 함께 VM이 표시됩니다. Shift 툴킷은 VM에서 사용하는 네트워크와 vLAN을 자동으로 감지하여 채웁니다.


NOTE: 소스 사이트에 수정 사항이 있는 경우 검색을 실행하여 최신 정보를 가져오세요. 사이트 이름 옆에 있는 3개의 점을 클릭하고 "사이트 검색"을 클릭하면 됩니다.


NOTE: VM 인벤토리는 24시간마다 자동으로 새로 고쳐집니다.

image::shift-toolkit-056.png[Shift Toolkit의 새 사이트 추가 대화 상자를 사용하여 사이트를 검색합니다.]

특정 소스 하이퍼바이저에 대한 검색 데이터를 보려면 대시보드로 이동하여 해당 사이트 이름에 대해 "VM 목록 보기"를 클릭합니다. 이 페이지에는 VM 속성과 함께 VM 인벤토리가 표시됩니다.

image::shift-toolkit-057.png[Shift Toolkit의 대화에서 발견된 사이트]

다음 단계는 대상 하이퍼바이저를 추가하는 것입니다. 추가하려면 "새 사이트 추가"를 클릭하고 "대상"을 선택하세요.



==== 목적지

image::shift-toolkit-058.png[대상에 대한 Shift Toolkit 사이트 추가 대화 상자의 대화 상자]

* 목적지 사이트 세부 정보
+
** 사이트 이름 - 사이트 이름을 입력하세요
** 하이퍼바이저 – 다음 옵션에서 적절한 대상 플랫폼을 선택하세요.
+
*** VMware
*** 하이퍼-V
*** 오픈시프트
*** 올브엠
*** KVM(변환만 가능)


** 사이트 위치 – 기본 옵션을 선택하세요
** 커넥터 - 기본 선택을 선택하세요




입력한 후 계속을 클릭하세요.

image::shift-toolkit-059.png[목적지 세부 정보를 위한 Shift Toolkit 사이트 추가 대화 상자의 대화 상자]

하이퍼바이저 선택에 따라 필요한 세부 정보를 입력하세요.

* 대상 하이퍼바이저 세부 정보
+
** 각 하이퍼바이저 관리자 Endpoint IP 주소 또는 FQDN
** 사용자 이름 - 액세스할 사용자 이름(UPN 형식: username@domain.com 또는 domain\administrator) 비밀번호 - 리소스 인벤토리를 수행하기 위해 액세스할 비밀번호.




"자체 서명된 인증서 수락"을 선택하세요.

* 완료되면 "사이트 만들기"를 클릭하세요.



NOTE: 디스크 포맷 변환은 볼륨 수준에서 동일한 볼륨 내에서 발생하므로 소스 및 대상 저장 시스템은 동일해야 합니다.

image::shift-toolkit-060.png[목적지 세부 정보를 위한 Shift Toolkit 사이트 추가 대화 상자의 대화 상자]

다음 단계는 필요한 VM을 리소스 그룹으로 마이그레이션 그룹으로 그룹화하는 것입니다.



=== 리소스 그룹화

플랫폼을 추가한 후 마이그레이션하거나 변환하려는 VM을 리소스 그룹으로 그룹화합니다.  Shift 툴킷 리소스 그룹을 사용하면 종속된 VM 세트를 부팅 순서와 부팅 지연을 포함하는 논리적 그룹으로 그룹화할 수 있습니다.


NOTE: 리소스 그룹을 만들기 전에 Qtree가 프로비저닝되었는지 확인하세요(필수 조건 섹션에 언급된 대로).

리소스 그룹 생성을 시작하려면 "새 리소스 그룹 생성" 메뉴 항목을 클릭하세요.

. 리소스 그룹에 액세스하려면 "새 리소스 그룹 만들기"를 클릭합니다.
+
image::shift-toolkit-061.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

. "새 리소스 그룹"에서 드롭다운에서 소스 사이트를 선택하고 "만들기"를 클릭합니다.
. 리소스 그룹 세부 정보를 제공하고 워크플로를 선택합니다.  워크플로는 두 가지 옵션을 제공합니다.
+
.. 클론 기반 마이그레이션 – 소스 하이퍼바이저에서 대상 하이퍼바이저로 VM의 종단 간 마이그레이션을 수행합니다.
.. 클론 기반 변환 – 디스크 형식을 선택한 하이퍼바이저 유형으로 변환합니다.
+
image::shift-toolkit-062.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]



. "계속"을 클릭하세요
. 검색 옵션을 사용하여 적절한 VM을 선택하세요. 기본 필터 옵션은 "데이터 저장소"입니다.
+

NOTE: 변환하기 전에 새로 생성된 ONTAP SVM의 지정된 데이터 저장소로 변환하거나 마이그레이션할 VM을 이동합니다. 이를 통해 프로덕션 NFS 데이터 저장소를 격리하고 지정된 데이터 저장소를 사용하여 가상 머신을 스테이징할 수 있습니다.

+

NOTE: OpenShift 환경의 경우 ONTAP NAS 스토리지 드라이버를 사용하여 PVC(영구 볼륨 클레임) 구조를 복제하려면 VMDK를 해당 볼륨으로 다시 배치해야 합니다. 향후 릴리스에서는 ONTAP NAS 경제 드라이버를 활용하기 위한 추가적인 개선 사항이 통합될 예정입니다.

+
image::shift-toolkit-063.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

+

NOTE: 이 컨텍스트의 데이터 저장소 드롭다운에는 NFSv3 데이터 저장소만 표시됩니다. NFSv4 데이터 저장소는 표시되지 않습니다.

+
image::shift-toolkit-064.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

. "대상 사이트", "대상 하이퍼바이저 항목" 및 데이터 저장소에서 Qtree 또는 스토리지 클래스 매핑을 선택하여 마이그레이션 세부 정보를 업데이트합니다.
+
image::shift-toolkit-065.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

+

NOTE: VM을 변환할 때 대상 경로(변환된 VM이 저장되는 경로)가 qtree로 설정되어 있는지 확인하세요. 대상 경로를 적절한 qtree로 설정합니다.

+

NOTE: 여러 개의 qtree를 생성하여 변환된 VM 디스크를 적절히 저장하는 데 사용할 수 있습니다.

+

NOTE: 가상 머신은 확장된 데이터 저장소에서 실행될 수 있으며, Shit 툴킷은 이를 자동으로 감지하지만, 각 볼륨에 대해 Q트리를 매핑해야 합니다.

+
여러 볼륨에 걸쳐 확장된 VMDK가 있는 VM을 마이그레이션하는 기능 Shift 툴킷 UI는 특정 RG에 대해 선택된 VM 또는 VM의 일부인 모든 확장된 볼륨을 자동으로 선택합니다.  이렇게 하면 데이터 저장소-Qtree 매핑을 수행하는 RG 페이지의 모든 볼륨이 나열됩니다.

+
image::shift-toolkit-066.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

. 선택한 모든 VM에 대한 부팅 순서와 부팅 지연(초)을 선택합니다. 각 가상 머신을 선택하고 우선순위를 설정하여 전원 켜기 순서를 정합니다. 모든 가상 머신의 기본값은 3입니다. 옵션은 다음과 같습니다. 1 – 전원을 켜는 첫 번째 가상 머신 3 – 기본값 5 – 전원을 켜는 마지막 가상 머신
+
image::shift-toolkit-067.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

. "리소스 그룹 만들기"를 클릭하세요.
+
image::shift-toolkit-068.png[새 리소스 그룹 만들기 사용자 인터페이스의 대화 상자]

+

NOTE: 가상 머신을 추가하거나 제거하기 위해 리소스 그룹을 수정해야 하는 경우, 리소스 그룹 이름에 이 옵션을 사용하고 "리소스 그룹 편집"을 선택하세요.





=== 청사진

가상 머신을 마이그레이션하거나 변환하려면 계획이 필요합니다. 드롭다운에서 소스 및 대상 하이퍼바이저 플랫폼을 선택하고 이 청사진에 포함될 리소스 그룹을 선택하고, 애플리케이션의 전원을 켜는 방법(예: 도메인 컨트롤러, 그 다음 1계층, 2계층 등)을 그룹화합니다. 이러한 계획은 종종 마이그레이션 계획이라고도 불립니다. 청사진을 정의하려면 "청사진" 탭으로 이동하여 "새 청사진 만들기"를 클릭합니다.

청사진 만들기를 시작하려면 "새 청사진 만들기"를 클릭하세요.

. 청사진에 액세스하여 "새 청사진 만들기"를 클릭합니다.
+
image::shift-toolkit-069.png[Access Blueprints 사용자 인터페이스 대화 상자]

. "새 청사진"에서 계획의 이름을 제공하고 소스 사이트 > 관련 vCenter, 대상 사이트 및 관련 하이퍼바이저를 선택하여 필요한 호스트 매핑을 추가합니다.
. 매핑이 완료되면 클러스터와 호스트 매핑을 선택합니다. 아래 예에서는 Hyper-V가 대상으로 표시됩니다.  표시되는 하이퍼바이저 옵션은 선택한 소스 사이트에 따라 달라집니다.
+
image::shift-toolkit-070.png[새 청사진 만들기 사용자 인터페이스 대화 상자]

. 리소스 그룹 세부 정보를 선택하고 "계속"을 클릭하세요.
+
image::shift-toolkit-071.png[새 청사진 만들기 사용자 인터페이스 대화 상자]

. 리소스 그룹에 대한 실행 순서를 설정합니다.  이 옵션을 사용하면 여러 리소스 그룹이 있는 경우 작업 순서를 선택할 수 있습니다.
. 이전 단계를 완료한 후 네트워크 매핑을 선택하여 적절한 네트워크 맵에 할당합니다.  가상 스위치, 네트워크 프로필 또는 운영자가 이미 대상 하이퍼바이저에 프로비저닝되어 있는지 확인하세요.
+
image::shift-toolkit-072.png[새 청사진 만들기 사용자 인터페이스 대화 상자]

+

NOTE: 테스트 마이그레이션의 경우 "네트워크 구성 안 함"이 기본 선택이며 Shift 툴킷은 IP 주소 할당을 수행하지 않습니다. 디스크가 변환되고 각 하이퍼바이저 측에서 가상 머신이 구매되면 프로덕션 네트워크와 충돌을 피하기 위해 버블 네트워크 스위치를 수동으로 할당합니다.

+
image::shift-toolkit-073.png[새 청사진 만들기 사용자 인터페이스 대화 상자]

. VM 선택에 따라 스토리지 매핑이 자동으로 선택됩니다.
+

NOTE: 가상 머신을 만들고 전원을 켤 수 있도록 사전에 qtree가 프로비저닝되어 있고 필요한 권한이 할당되어 있는지 확인하세요.  참고: OpenShift의 경우 PVC는 Trident CSI를 사용하여 생성되므로 qtree를 미리 생성할 필요가 없습니다.

. VM 세부 정보에서 각 OS 유형에 대한 서비스 계정과 유효한 사용자 자격 증명을 제공합니다.  이는 VMware 도구를 제거하고 IP 구성 세부 정보를 백업하는 데 필요한 특정 스크립트를 생성하고 실행하기 위해 가상 머신에 연결하는 데 사용됩니다.
+
.. Windows 기반 OS의 경우 로컬 관리자 권한이 있는 사용자를 사용하는 것이 좋습니다. 도메인 자격 증명도 사용할 수 있지만 변환하기 전에 VM에 사용자 프로필이 있는지 확인하세요. 그렇지 않으면 도메인 자격 증명이 작동하지 않습니다. 네트워크에 연결되지 않은 경우 도메인 인증을 찾기 때문입니다.
.. Linux 배포판 기반 게스트 VM의 경우 비밀번호 없이 sudo 명령을 실행할 수 있는 사용자를 제공해야 합니다. 즉, 사용자는 sudoers 목록에 포함되어야 하거나 /etc/sudoers.d/ 폴더에 새 구성 파일로 추가되어야 합니다.
+
image::shift-toolkit-074.png[새 청사진 만들기 사용자 인터페이스 대화 상자]

+
최근 릴리스에서 Shift Toolkit은 가상 머신 준비에 있어 더 큰 유연성을 제공했습니다.  기본적으로 툴킷은 다음을 위해 OS별 스크립트를 배포하여 VM 준비를 자동화합니다. * VMware Tools 제거 * 선택한 블루프린트에 따라 재할당을 위한 IP 설정 백업

+
+ 새로운 기능 향상을 통해 사용자는 이제 기본 prepareVM 작업을 재정의하여 IP 할당을 포함한 수동 VM 준비를 위한 사용자 정의 스크립트를 실행할 수 있습니다.  이를 통해 고유한 구성이나 규정 준수 요구 사항이 있는 환경에 대한 제어력이 향상됩니다.



. 다시 VM 세부 정보에서 관련 IP 구성 옵션을 선택합니다. 기본적으로 "구성하지 않음"이 선택되어 있습니다.
+
.. 소스 시스템에서 동일한 IP를 가진 VM을 마이그레이션하려면 "IP 유지"를 선택합니다.
.. 소스 시스템에서 정적 IP를 사용하여 VM을 마이그레이션하고 대상 VM에 DHCP를 할당하려면 "DHCP"를 선택합니다.
+
이 기능이 작동하려면 다음 요구 사항을 충족해야 합니다.

+
*** prepareVM 단계와 예약된 마이그레이션 시간까지 VM의 전원이 켜져 있는지 확인하세요.
*** VMware VM의 경우 VMware Tools가 설치되어 있는지 확인하세요.
*** 소스 하이퍼바이저로 Hyper-v를 사용하는 경우 통합 서비스가 활성화되고 구성되어 있는지 확인하세요.
*** OLVM 및 OpenShift를 대상 하이퍼바이저로 사용하는 경우 virtIO ISO 파일을 Windows VM에 마운트해야 합니다.
*** Windows OS에서는 관리자 권한이 있는 계정으로 소스 VM에서 준비 스크립트를 실행하고, Linux 기반 배포 OS에서는 암호 옵션 없이 sudo 권한이 있는 계정으로 크론 작업을 생성해야 합니다.




. 다음 단계는 VM 구성입니다.
+
** 선택적으로 VM CPU/RAM 매개변수의 크기를 조정할 수 있는데, 이는 크기 조정에 매우 유용합니다.
** 부팅 순서 재정의: 리소스 그룹 전체에서 선택한 모든 VM에 대한 부팅 순서 및 부팅 지연(초)도 수정합니다.  이는 리소스 그룹 부팅 순서를 선택하는 동안 선택한 내용을 변경해야 할 경우 부팅 순서를 수정하기 위한 추가 옵션입니다.  기본적으로 리소스 그룹 선택 중에 선택된 부팅 순서가 사용되지만, 이 단계에서 모든 수정 작업을 수행할 수 있습니다.
** 전원 켜기: 워크플로가 가상 머신의 전원을 켜지 않도록 하려면 이 옵션의 선택을 취소하세요.  기본 옵션은 ON으로, VM의 전원이 켜져 있음을 의미합니다.
** VMware 도구 제거: Shift Toolkit은 변환 후 VMware 도구를 제거합니다. 이 옵션은 기본적으로 선택되어 있습니다. 고객의 맞춤형 스크립트를 실행하는 것이 계획인 경우 이 옵션을 선택 취소해야 합니다.
** 세대: Shift 툴킷은 다음의 경험 법칙을 사용하며 적절한 세대를 기본값으로 지정합니다. Gen1 > BIOS, Gen2 > EFI.  이 옵션은 선택할 수 없습니다.
** MAC 유지: MAC에 의존하는 애플리케이션의 라이선싱 문제를 극복하기 위해 각 VM의 MAC 주소를 유지할 수 있습니다.
** 서비스 계정 재정의: 이 옵션을 사용하면 글로벌 계정을 사용할 수 없는 경우 별도의 서비스 계정을 지정할 수 있습니다.
+
image::shift-toolkit-075.png[리소스 그룹 사용자 인터페이스의 대화 상자]



. "계속"을 클릭하세요.
. 다음 단계에서는 날짜와 시간을 설정하는 확인란을 선택하여 마이그레이션을 예약합니다. 예약된 날짜 전에 모든 가상 머신(VM)이 준비되고 전원이 꺼졌는지 확인하세요. 완료되면 "청사진 만들기"를 클릭하세요.
+
image::shift-toolkit-076.png[리소스 그룹 사용자 인터페이스의 대화 상자]

+

NOTE: 일정을 예약할 때 현재 Shift VM 시간보다 최소 30분 전의 날짜를 선택하세요. 이는 워크플로가 리소스 그룹 내에서 VM을 준비할 수 있는 충분한 시간을 확보하도록 하기 위한 것입니다.

. 청사진이 생성되면 prepareVM 작업이 시작되고 소스 VM에서 스크립트가 자동으로 실행되어 마이그레이션을 준비합니다.
+
image::shift-toolkit-077.png[리소스 그룹 사용자 인터페이스의 대화 상자]

+
이 작업은 invoke-VMScript 메서드를 사용하여 VMware 도구를 제거하고 IP 주소, 경로, DNS 정보를 비롯한 네트워크 구성 세부 정보를 백업하는 데 필요한 스크립트를 복사하는 스크립트를 실행합니다. 이 정보는 대상 VM에서 동일한 설정을 유지하는 데 사용됩니다.

+
.. Windows 기반 운영 체제의 경우 준비 스크립트가 저장되는 기본 위치는 "C:\ NetApp" 폴더입니다.
+
image::shift-toolkit-078.png[리소스 그룹 사용자 인터페이스의 대화 상자]

.. Linux 기반 VM의 경우 준비 스크립트가 저장되는 기본 위치는 / NetApp 및 /opt 디렉토리입니다.
+
image::shift-toolkit-079.png[리소스 그룹 사용자 인터페이스의 대화 상자]

+

NOTE: CentOS 또는 Red Hat을 실행하는 Linux 소스 VM의 경우 Shift 툴킷은 필요한 Hyper-V 드라이버를 자동으로 설치합니다. VM이 변환 후 성공적으로 부팅될 수 있도록 디스크 변환 전에 소스 VM에 이러한 드라이버가 있어야 합니다.

+

NOTE: 자세한 내용은 다음을 참조하세요.link:https://access.redhat.com/solutions/3465011["RHEL VM을 Hyper-V로 마이그레이션한 후 시스템이 Dracut에 갇힘"] .

+
prepareVM 작업이 성공적으로 완료되면(아래 스크린샷 참조), VM을 마이그레이션할 준비가 되고 블루프린트 상태가 "활성"으로 업데이트됩니다.

+
image::shift-toolkit-080.png[리소스 그룹 사용자 인터페이스의 대화 상자]

+
image::shift-toolkit-081.png[리소스 그룹 사용자 인터페이스의 대화 상자]

+
이제 설정된 시간에 마이그레이션이 진행되거나 마이그레이션 옵션을 클릭하여 수동으로 시작할 수 있습니다.




