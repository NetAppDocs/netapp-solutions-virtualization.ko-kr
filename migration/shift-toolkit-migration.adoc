---
sidebar: sidebar 
permalink: migration/shift-toolkit-migration.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox, shift, toolkit 
summary: Shift Toolkit을 사용하여 가상화 플랫폼 간에 VM을 마이그레이션합니다.  이 프로세스에는 VM 준비, 디스크 형식 변환, 대상 환경의 네트워크 설정 구성이 포함됩니다. 
---
= Shift Toolkit을 사용하여 VM 마이그레이션
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Shift Toolkit을 사용하여 가상화 플랫폼 간에 VM을 마이그레이션합니다.  이 프로세스에는 VM 준비, 디스크 형식 변환, 대상 환경의 네트워크 설정 구성이 포함됩니다.



== 지원되는 마이그레이션

Shift Toolkit은 다음 하이퍼바이저 간 양방향 마이그레이션을 지원하여 다중 하이퍼바이저 환경에서 유연성을 제공합니다.

* link:shift-toolkit-migrate-esxi2hyperv.html["VMware ESXi에서 Microsoft Hyper-V로"]
* link:shift-toolkit-migrate-hyperv2esxi.html["Microsoft Hyper-V에서 VMware ESXi로"]
* link:shift-toolkit-migrate-esxi2olvm.html["VMware ESXi에서 Oracle Linux Virtualization Manager(OLVM)로"]
* link:shift-toolkit-migrate-esxi2osv.html["VMware ESXi에서 Red Hat OpenShift 가상화로"]




== 마이그레이션 워크플로

청사진을 만든 후 마이그레이션 프로세스를 시작할 수 있습니다.  마이그레이션 중에 Shift Toolkit은 일련의 단계를 수행하여 디스크 형식을 변환하고 블루프린트에 정의된 대로 대상 호스트에 가상 머신을 생성합니다.

Shift Toolkit은 마이그레이션 중에 다음 단계를 수행합니다.

. 블루프린트의 모든 VM에 대한 기존 스냅샷을 삭제합니다.
. 소스에서 청사진에 대한 VM 스냅샷을 트리거합니다.
. 디스크 변환 전 볼륨 스냅샷 트리거
. 모든 VM에 대해 VMDK를 VHDx 형식으로 복제하고 변환합니다.
. 대상의 보호 그룹에 있는 VM의 전원을 켭니다.
. 각 VM에 네트워크를 등록합니다.
. VMware Tools를 제거하고 OS 유형에 따라 트리거 스크립트나 Cron 작업을 사용하여 IP 주소를 할당합니다.




== 네트워크 팁 및 고려 사항

마이그레이션을 계획할 때 다음 네트워크 요구 사항과 동작을 고려하세요.  Shift Toolkit은 소스 VM에서 네트워크 설정을 자동으로 복사하여 마이그레이션된 VM에 다시 적용하지만, 인터페이스 명명 및 네트워크 어댑터 구성은 Windows와 Linux 시스템 간에 다를 수 있습니다.

.일반 요구 사항
* 정적 IP 주소가 사용 가능하고 다른 VM에 할당되지 않았는지 확인하세요.


.Windows VM
* 준비 스크립트는 네트워크 구성 세부 정보(IP 주소 공간, 게이트웨이 주소, DNS 서버)를 복사합니다.
* 트리거 스크립트는 블루프린트 매핑을 기반으로 단일 또는 여러 NIC에 대한 마이그레이션 중에 네트워크 설정을 다시 적용합니다.
* 마이그레이션 후 Windows 장치 관리자는 새 어댑터에 영향을 미치지 않거나 IP 충돌을 일으키지 않는 사전 마이그레이션의 이전 네트워크 어댑터 정보를 표시할 수 있습니다.
* 레지스트리와 장치 관리자에서 고아 네트워크 장치를 자동으로 제거하려면 v4.0으로 업그레이드하세요.


.Linux VM
* 준비 스크립트는 네트워크 구성 세부 정보(IP 주소 공간, 경로, DNS 서버, 네트워크 장치 이름)를 복사합니다.
* 스크립트는 Linux 배포판의 네트워킹 유형을 식별하고 그에 따라 IP 설정을 적용합니다.
* 네트워크 재할당 스크립트는 crontab을 사용하여 cron 작업으로 구성되고 부팅 시 트리거됩니다.
* 스크립트는 블루프린트 매핑을 기반으로 단일 또는 여러 NIC에 대한 네트워크 설정을 다시 적용합니다.


.인터페이스 명명
* 변환된 VM에는 다음과 같은 인터페이스 이름이 있을 수 있습니다. `eth0` 또는 `ensp0` 소스 인터페이스 이름 대신(예: `ens192` 또는 `ens33` )
* 스크립트는 새 인터페이스 이름과 일치하도록 네트워크 구성 세부 정보를 업데이트합니다.
* 예측 가능한 이름이 적절한 udev 매칭 규칙과 함께 사용되고 인터페이스 이름이 대상 하이퍼바이저에 유지되는 경우 스크립트는 네트워크 구성을 건너뛰고 VMware Tools를 제거하며 VM을 재부팅합니다.



NOTE: Shift Toolkit을 사용하면 네트워크 준비를 재정의하여 관리자가 IP 할당이나 기타 구성을 위한 사용자 정의 스크립트를 실행할 수 있습니다.

.지원되는 네트워킹 메커니즘
* 네트워크 관리자
* 넷플랜
* ifconfig
* 사악한


Shift Toolkit은 청사진에 지정된 대로 IP 주소를 유지합니다.



== 마이그레이션 단계

Shift Toolkit을 사용하여 VM을 마이그레이션하는 데 따르는 마이그레이션 단계는 다음과 같습니다.

. *VM 준비*: 마이그레이션을 위해 VM을 준비하고 모든 필수 조건이 충족되었는지 확인합니다.
. *마이그레이션 및 검증*: 준비가 완료되면 VMware VM을 대상 하이퍼바이저로 마이그레이션합니다.
+
마이그레이션이 완료된 후 VM이 성공적으로 부팅되고 데이터가 올바르게 마이그레이션되었는지 확인합니다.

. *마이그레이션 테스트*: 테스트 마이그레이션은 VMDK를 적절한 형식으로 변환하고 qtree에서 변환된 가상 디스크 파일을 사용하여 VM을 생성하여 마이그레이션을 시뮬레이션합니다.
+
테스트 마이그레이션에는 네트워크 매핑 구성이 포함되지 않으므로 테스트 네트워크에 수동으로 수행해야 합니다.




NOTE: Shift Toolkit은 VM 준비에 필요한 스크립트를 복사하는 것을 제외하고는 소스 VM을 변경하지 않습니다.  이를 통해 변환에 실패할 경우 신속하게 롤백할 수 있습니다.



== 마이그레이션 실행

블루프린트에 지정된 구성으로 마이그레이션 워크플로를 트리거하려면 *마이그레이션*을 클릭합니다.

image::shift-toolkit-030.png[VM 마이그레이션을 트리거하는 방법을 보여주는 대화 상자]

워크플로가 시작되면 활성화되고 변환 프로세스는 설명된 단계에 따라 VM을 등록합니다.  블루프린트 내의 VM이 전원이 꺼지지 않은 경우 Shift Toolkit은 계속 진행하기 전에 정상적으로 종료할지 묻습니다.

image::shift-toolkit-031.png[이민 프로세스 확인]


NOTE: NetApp 동일한 소스에서 동일한 대상으로 최대 10개의 변환을 동시에 트리거할 것을 권장합니다.

image::shift-toolkit-032.png[이주 진행 상황]

VMDK를 모든 파일 형식으로 변환하는 데 몇 초 밖에 걸리지 않아 가장 빠른 옵션입니다.  이 접근 방식은 마이그레이션 중 VM 가동 중지 시간을 줄이는 데 도움이 됩니다.

image::shift-toolkit-033.png[디스크 변환 진행 상황]

작업이 완료되면 청사진 상태가 "마이그레이션 완료"로 변경됩니다.

image::shift-toolkit-034.png[마이그레이션 완료 상태]
